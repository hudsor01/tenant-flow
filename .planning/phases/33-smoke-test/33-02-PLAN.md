---
phase: 33-smoke-test
plan: 02
type: execute
---

<objective>
Manually walk every critical user flow as both owner and tenant, record what works and what's broken, then produce the prioritized issue backlog for Phases 34-37.

Purpose: E2E tests catch mechanical failures. This plan catches UX gaps, missing UI elements, and flows that require real Stripe redirects or actual payment interactions. The ISSUES.md produced here drives all Phase 34-37 work.
Output: Updated `SMOKE-TEST-RESULTS.md` (manual section), `.planning/ISSUES.md` (prioritized backlog).
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./summary.md
~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/33-smoke-test/SMOKE-TEST-RESULTS.md
@apps/frontend/src/app/(owner)/settings/page.tsx
@apps/frontend/src/app/(tenant)/tenant/page.tsx
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Owner flow walkthrough checklist</what-built>
  <how-to-verify>
  Open http://localhost:3050 and sign in as the owner account (test-admin@tenantflow.app or your owner account).

  For each item, mark: ✅ PASS | ❌ FAIL | ⚠️ PARTIAL (with brief notes on failures)

  **--- Dashboard ---**
  1. `/dashboard` loads — stat cards show real numbers (not 0 or blank)
  2. Occupancy rate and revenue metrics visible

  **--- Properties ---**
  3. `/properties` loads — property list or cards visible
  4. Create property: fill required fields → submit → success toast + redirect
  5. Edit property: change a field → save → success toast
  6. Property detail page: all sections load without error

  **--- Tenants ---**
  7. `/tenants` loads — tenant list visible
  8. Invite tenant: enter email, fill required fields → submit → success (or clear error if no seats)

  **--- Leases ---**
  9. `/leases` loads — lease list visible
  10. Create lease: assign tenant and property → submit → success or validation error

  **--- Maintenance ---**
  11. `/maintenance` loads — request list visible
  12. Status filter (Open / In Progress / Completed) works

  **--- Billing ---**
  13. `/billing/plans` loads — Free/Pro/Enterprise plan cards visible
  14. Upgrade button visible on non-current plan

  **--- Settings (billing tab) ---**
  15. `/settings?tab=billing` loads — Billing tab content visible
  16. Current subscription plan name shown correctly
  17. Stripe Connect section visible on the billing tab
  18. "Connect Stripe Account" button (or active Connect status) visible
  19. Clicking "Connect Stripe Account" → dialog or Stripe redirect opens

  **--- Financials ---**
  20. `/financials` — overview/summary page loads without error
  21. `/financials/expenses` — loads without error (can be empty, not blank/crash)
  22. `/financials/payouts` — loads without error
  23. `/financials/tax-documents` — loads without error

  **--- Reports & Analytics ---**
  24. `/reports` — page loads without error
  25. `/analytics` — charts or metrics visible
  </how-to-verify>
  <resume-signal>
  Paste your results as a numbered list. Example:

  1. Dashboard stats: PASS
  2. Dashboard metrics: PASS
  3. Properties list: PASS
  4. Create property: FAIL - "Internal server error" on submit
  5. Edit property: PASS
  ...
  25. Analytics: PARTIAL - charts load but no data

  When finished, type: owner-done
  </resume-signal>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Tenant flow walkthrough checklist</what-built>
  <how-to-verify>
  Sign out of the owner account. Sign in as a tenant account.

  If you don't have a tenant account set up: the E2E setup creates one (see `apps/e2e-tests/playwright/.auth/tenant.json` for credentials, or check `.env.test` for E2E_TENANT_EMAIL).

  The tenant portal is at http://localhost:3050/tenant

  **--- Tenant Portal ---**
  1. `/tenant` loads — tenant dashboard visible (not 404 or "no access" error)
  2. Current lease displayed — property name, lease dates visible
  3. Rent amount / monthly payment shown

  **--- Payments ---**
  4. `/tenant/payments` loads — payments page visible
  5. "Pay Rent" button or payment CTA visible
  6. Clicking Pay Rent → Stripe Checkout redirect occurs (or shows a clear "not configured" message — both are acceptable, just note which)

  **--- Lease ---**
  7. `/tenant/lease` loads — lease details visible
  8. Key terms shown: start date, end date, monthly rent amount

  **--- Maintenance ---**
  9. `/tenant/maintenance` loads — request list visible (can be empty)
  10. Submit maintenance request: form opens → fill fields → submit → success or validation

  **--- Documents ---**
  11. `/tenant/documents` loads — page visible (can be empty, but no crash)

  **--- Profile/Settings ---**
  12. `/tenant/profile` or `/tenant/settings` loads — profile edit form visible
  </how-to-verify>
  <resume-signal>
  Paste results as a numbered list. Example:

  1. Tenant portal: FAIL - redirects to /login even when signed in
  2. Lease displayed: N/A (could not reach portal)
  ...
  12. Profile: PASS

  When finished, type: tenant-done
  </resume-signal>
</task>

<task type="auto">
  <name>Task 3: Create prioritized ISSUES.md and update SMOKE-TEST-RESULTS.md</name>
  <files>.planning/ISSUES.md, .planning/phases/33-smoke-test/SMOKE-TEST-RESULTS.md</files>
  <action>
  1. Update `.planning/phases/33-smoke-test/SMOKE-TEST-RESULTS.md` — fill in the "Manual Verification" section with the results from the two checkpoints above. List each flow and its status.

  2. Create `.planning/ISSUES.md` combining all findings:
     - Failed automated E2E tests from 33-01
     - Manual walkthrough failures from this plan
     - Known gaps from the pre-smoke gap analysis

  Use this template for ISSUES.md:

  ```markdown
  # TenantFlow Issue Backlog

  **Last updated:** [date]
  **Source:** Phase 33 Smoke Test

  ## P0: Blocking (core user journey broken)

  - [ ] **[Issue title]**: [What breaks, where] | Planned fix: Phase [X]

  ## P1: High (significant user impact, workaround exists or unclear)

  - [ ] **[Issue title]**: [What breaks, where] | Planned fix: Phase [X]

  ## P2: Medium (impacts UX but has workaround)

  - [ ] **[Issue title]**: [What's wrong, where] | Planned fix: Phase [X]

  ## P3: Low (polish, nice-to-have)

  - [ ] **[Issue title]**: [What's wrong] | Planned fix: Backlog

  ## Completed Issues

  *(none yet)*
  ```

  Pre-populate with known gaps (assign priority based on user impact):
  - P0/P1: Tenant cannot pay rent end-to-end → Phase 34/36
  - P0/P1: Stripe Connect CTA missing/misplaced for owners → Phase 34
  - P1: Subscription enforcement absent (Free accesses Pro) → Phase 35
  - P2: Financial pages (expenses/payouts/tax-documents) show empty/placeholder → Phase 37

  Add ALL additional issues found in 33-01 (failed E2E tests) and this plan (manual failures).
  Assign phases 34-37 where the fix naturally belongs. Mark anything that doesn't fit as "Backlog".
  </action>
  <verify>
  ```bash
  cat /Users/richard/Developer/tenant-flow/.planning/ISSUES.md | head -40
  ```
  ISSUES.md exists with at least 4 populated issues. Each has a priority (P0-P3) and a planned phase.
  </verify>
  <done>
  - ISSUES.md created with all known + discovered issues, prioritized P0-P3
  - SMOKE-TEST-RESULTS.md "Manual Verification" section completed
  - Phase 33 smoke test fully documented
  </done>
</task>

</tasks>

<verification>
Before declaring this plan complete:
- [ ] Both manual walkthroughs completed (owner and tenant flows)
- [ ] SMOKE-TEST-RESULTS.md "Manual Verification" section filled in
- [ ] `.planning/ISSUES.md` created with all issues, P0-P3 priority, phase assignments
- [ ] All 4 known gaps appear in ISSUES.md with phase assignments
</verification>

<success_criteria>
- Manual flow walkthroughs completed for both owner (25 flows) and tenant (12 flows)
- All failures documented with enough detail for Phase 34-37 to act on
- ISSUES.md created as the authoritative backlog for v5.0
- Phase 33 smoke test complete — ready for Phase 34
</success_criteria>

<output>
After completion, create `.planning/phases/33-smoke-test/33-02-SUMMARY.md`:

---
phase: 33-smoke-test
plan: 02
subsystem: testing
provides: issue-backlog, smoke-test-complete
affects: [34-stripe-connect, 35-subscription-enforcement, 36-tenant-onboarding, 37-financial-wiring]
key-files:
  - .planning/ISSUES.md
  - .planning/phases/33-smoke-test/SMOKE-TEST-RESULTS.md
key-decisions:
  - Phase 33 smoke test established the baseline for v5.0 fixes
---

# Phase 33 Plan 02 Summary: Manual Verification + Issue Triage

**[Headline: X owner flows and Y tenant flows tested, Z issues documented in ISSUES.md]**

## Accomplishments

- Manual owner flow walkthrough: [X/25] passing
- Manual tenant flow walkthrough: [X/12] passing
- ISSUES.md created with [N] issues (P0: X, P1: X, P2: X, P3: X)
- Phase 34-37 scope confirmed by findings

## Files Created/Modified

- `.planning/ISSUES.md` - Prioritized issue backlog for v5.0
- `.planning/phases/33-smoke-test/SMOKE-TEST-RESULTS.md` - Manual section completed

## Key Findings

[List the most critical failures discovered]

## Next Step

Phase 33 complete. Ready for Phase 34: Stripe Connect End-to-End.
Update STATE.md: Phase 34, Plan 01, Ready to plan.
</output>
