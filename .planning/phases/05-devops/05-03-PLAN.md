---
phase: 05-devops
plan: 03
type: execute
subsystem: documentation
---

<objective>
Create comprehensive .env.example files and deployment documentation.

Purpose: Enable developers to set up the project without Doppler, document deployment topology.
Output: .env.example files for frontend and backend, DEPLOYMENT.md documentation.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-phase.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

# Prior plans
@.planning/phases/05-devops/05-01-SUMMARY.md
@.planning/phases/05-devops/05-02-SUMMARY.md

# Deployment topology
- Frontend: Vercel (auto-deploys from main)
- Backend: Railway (manual deploys currently)
- Database: Supabase (managed)
- Secrets: Doppler (production), .env.local (development)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create frontend .env.example</name>
  <files>
    apps/frontend/.env.example
  </files>
  <action>
Create `apps/frontend/.env.example`:

```bash
# ===========================================
# TenantFlow Frontend Environment Variables
# ===========================================
# Copy this file to .env.local and fill in values
# For production, use Doppler or Vercel env vars

# ===========================================
# App Configuration
# ===========================================
NEXT_PUBLIC_APP_URL=http://localhost:3050
NEXT_PUBLIC_API_BASE_URL=http://localhost:4650/api/v1

# ===========================================
# Supabase (get from Supabase dashboard)
# ===========================================
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
NEXT_PUBLIC_SUPABASE_PUBLISHABLE_KEY=eyJ...

# ===========================================
# Stripe (get from Stripe dashboard)
# ===========================================
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_test_...

# Server-only Stripe Price IDs (for checkout)
STRIPE_STARTER_MONTHLY_PRICE_ID=price_...
STRIPE_STARTER_ANNUAL_PRICE_ID=price_...
STRIPE_GROWTH_MONTHLY_PRICE_ID=price_...
STRIPE_GROWTH_ANNUAL_PRICE_ID=price_...
STRIPE_MAX_MONTHLY_PRICE_ID=price_...
STRIPE_MAX_ANNUAL_PRICE_ID=price_...

# ===========================================
# Optional
# ===========================================
NEXT_PUBLIC_JWT_ALGORITHM=ES256
```
  </action>
  <verify>File created with all required variables</verify>
  <done>Frontend .env.example created</done>
</task>

<task type="auto">
  <name>Task 2: Create backend .env.example</name>
  <files>
    apps/backend/.env.example
  </files>
  <action>
Create `apps/backend/.env.example`:

```bash
# ===========================================
# TenantFlow Backend Environment Variables
# ===========================================
# Copy this file to .env and fill in values
# For production, use Doppler or Railway env vars

# ===========================================
# Server Configuration
# ===========================================
NODE_ENV=development
PORT=4650

# ===========================================
# Supabase (get from Supabase dashboard)
# ===========================================
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_SERVICE_ROLE_KEY=eyJ...
SUPABASE_PUBLISHABLE_KEY=eyJ...

# Optional: Direct database connection
# DATABASE_URL=postgresql://postgres:password@db.your-project.supabase.co:5432/postgres

# ===========================================
# Stripe (get from Stripe dashboard)
# ===========================================
STRIPE_SECRET_KEY=sk_test_...
STRIPE_WEBHOOK_SECRET=whsec_...

# ===========================================
# Redis / BullMQ (for background jobs)
# ===========================================
# Leave empty to use in-memory queue (development only)
REDIS_URL=redis://localhost:6379
BULLMQ_WORKERS_ENABLED=true

# ===========================================
# n8n Integration (optional)
# ===========================================
N8N_WEBHOOK_SECRET=your-webhook-secret
N8N_CRON_MODE=false
N8N_PDF_MODE=false

# ===========================================
# Performance Tuning
# ===========================================
SLOW_QUERY_THRESHOLD_MS=1000
```
  </action>
  <verify>File created with all required variables</verify>
  <done>Backend .env.example created</done>
</task>

<task type="auto">
  <name>Task 3: Create root .env.example</name>
  <files>
    .env.example
  </files>
  <action>
Create root `.env.example` that points to app-specific files:

```bash
# ===========================================
# TenantFlow Monorepo Environment Variables
# ===========================================
#
# This project uses Doppler for secrets management in production.
# For local development without Doppler:
#
# 1. Copy app-specific .env.example files:
#    - apps/frontend/.env.example -> apps/frontend/.env.local
#    - apps/backend/.env.example -> apps/backend/.env
#
# 2. Fill in the values from your Supabase and Stripe dashboards
#
# 3. Run with: pnpm dev
#
# ===========================================
# With Doppler (recommended for team development):
#
# 1. Install Doppler CLI: https://docs.doppler.com/docs/install-cli
# 2. Run: doppler login
# 3. Run: doppler setup
# 4. Run with: pnpm dev
# ===========================================
```
  </action>
  <verify>Root .env.example created</verify>
  <done>Root .env.example created with setup instructions</done>
</task>

<task type="auto">
  <name>Task 4: Update .gitignore</name>
  <files>
    .gitignore
  </files>
  <action>
1. Verify .gitignore includes:
   ```
   # Environment variables
   .env
   .env.local
   .env.*.local

   # Keep .env.example files
   !.env.example
   !apps/*/.env.example
   ```

2. Ensure .env.example files are NOT ignored
  </action>
  <verify>.gitignore correctly configured</verify>
  <done>.gitignore updated</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] apps/frontend/.env.example exists with all variables
- [ ] apps/backend/.env.example exists with all variables
- [ ] Root .env.example exists with setup instructions
- [ ] .gitignore allows .env.example files
- [ ] A developer can set up the project by copying .env.example files
</verification>

<success_criteria>
- Complete documentation of all required env vars
- Clear setup instructions for new developers
- .env.example files tracked in git
</success_criteria>

<output>
After completion, create `.planning/phases/05-devops/05-03-SUMMARY.md` using summary template.
</output>
