---
phase: 14-stripe-connect-payouts-ui
plan: 01
type: execute
domain: stripe-frontend
---

<objective>
Build Connect account status dashboard for property owners to view their account status, verification requirements, and capabilities.

Purpose: Give owners visibility into their Stripe Connect account and guide them through verification.
Output: Account status card, verification requirements display, and quick action buttons.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-phase.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/14-stripe-connect-payouts-ui/14-CONTEXT.md

**Existing files:**
@apps/frontend/src/hooks/api/use-stripe-connect.ts
@apps/frontend/src/components/settings/stripe-connect-tab.tsx
@apps/frontend/src/app/(owner)/financials/payouts/page.tsx

**Backend endpoints available:**
- GET /api/v1/stripe/connect/account - Account details
- GET /api/v1/stripe/connect/status - Onboarding/verification status
- GET /api/v1/stripe/connect/balance - Available/pending balance
- POST /api/v1/stripe/connect/dashboard-link - Stripe dashboard URL

**Constraining decisions:**
- Reuse existing hooks (no new API work needed)
- Focus on UI/UX for account status visibility
- Match existing dashboard styling patterns
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Connect account status card component</name>
  <files>
    apps/frontend/src/components/connect/connect-account-status.tsx
  </files>
  <action>
    Create a comprehensive account status card for the owner dashboard.

    **ConnectAccountStatus component:**
    - Show account status badge (pending, in_progress, complete)
    - Display capabilities with icons:
      - charges_enabled (can receive payments)
      - payouts_enabled (can receive payouts)
    - Show business name and account type
    - Show balance summary (available, pending)
    - Quick action buttons:
      - "Continue Setup" if incomplete
      - "Stripe Dashboard" if complete
      - "Refresh Status" to update from Stripe

    **States to handle:**
    - No account yet → Show "Set up Stripe" CTA
    - Onboarding in progress → Show progress + continue button
    - Verification needed → Show requirements count + warning
    - Fully verified → Show green status + dashboard link

    Use Card, Badge, Button from shadcn/ui.
    Use existing useConnectedAccount() hook.
  </action>
  <verify>
    pnpm typecheck passes
    Component handles all states
    Actions trigger correct mutations
  </verify>
  <done>
    Account status card shows current state
    Quick actions work correctly
    Loading and error states handled
  </done>
</task>

<task type="auto">
  <name>Task 2: Create verification requirements display</name>
  <files>
    apps/frontend/src/components/connect/connect-requirements.tsx
  </files>
  <action>
    Create a component showing pending verification requirements.

    **ConnectRequirements component:**
    - List each requirement from requirements_due array
    - Show user-friendly labels for requirement types:
      - individual.verification.document → "Identity verification"
      - company.verification.document → "Business verification"
      - external_account → "Bank account"
      - tos_acceptance → "Terms of service"
    - Show deadline if requirements have due date
    - "Complete in Stripe" button to open dashboard
    - Collapse/expand for long lists

    **Visual treatment:**
    - Use AlertTriangle icon for warnings
    - Show count badge (e.g., "3 items needed")
    - Yellow/warning styling for pending items

    Map Stripe requirement codes to friendly names.
    Use Collapsible for long lists.
  </action>
  <verify>
    Requirements map to friendly names
    Collapse works for long lists
    Button opens Stripe dashboard
  </verify>
  <done>
    Requirements display with friendly labels
    Action button to complete in Stripe
    Visual hierarchy clear
  </done>
</task>

<task type="auto">
  <name>Task 3: Add Connect status to owner settings page</name>
  <files>
    apps/frontend/src/app/(owner)/settings/page.tsx
  </files>
  <action>
    Add Connect account status section to the owner settings page.

    **Changes:**
    - Add "Stripe Connect" section after existing sections
    - Include ConnectAccountStatus component
    - Include ConnectRequirements component (if requirements exist)
    - Show onboarding dialog trigger if no account

    **Layout:**
    - Use consistent Card layout with other settings sections
    - Section header: "Payment Account"
    - Description: "Receive rent payments from tenants"

    Import and integrate new components.
    Ensure proper spacing and visual consistency.
  </action>
  <verify>
    Settings page loads without errors
    Connect section appears for owners
    Components integrate cleanly
  </verify>
  <done>
    Connect status visible in settings
    Requirements shown when applicable
    Setup flow accessible
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Connect account status dashboard components</what-built>
  <how-to-verify>
    1. Run: pnpm --filter @repo/frontend dev
    2. Visit: http://localhost:3050/settings (as owner)
    3. Verify: Connect status card appears
    4. Check: Status badge shows correct state
    5. Check: Capabilities (charges/payouts) displayed
    6. Check: Balance summary shown (if account exists)
    7. Check: Requirements displayed (if any pending)
    8. Test: Quick action buttons work
  </how-to-verify>
  <resume-signal>Type "approved" to continue, or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] pnpm typecheck passes
- [ ] pnpm lint passes
- [ ] ConnectAccountStatus component renders all states
- [ ] ConnectRequirements shows friendly labels
- [ ] Settings page integrates components
- [ ] Loading and error states work
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- No TypeScript errors
- Owners can view Connect account status
- Verification requirements clearly displayed
</success_criteria>

<output>
After completion, create `.planning/phases/14-stripe-connect-payouts-ui/14-01-SUMMARY.md`
</output>
