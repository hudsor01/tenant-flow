---
phase: 03-test-coverage
plan: 03
type: execute
subsystem: e2e
---

<objective>
Triage and resolve 51 skipped E2E tests.

Purpose: ~43% of E2E tests are skipped, providing false confidence in test suite health. Each skipped test should be: enabled (if working), fixed (if broken but valuable), or deleted (if obsolete/redundant).
Output: Reduced skipped test count with documented decisions for each category.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-phase.md
@~/.claude/get-shit-done/templates/summary.md
@~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/codebase/TESTING.md

# Prior plans in this phase
@.planning/phases/03-test-coverage/03-01-SUMMARY.md
@.planning/phases/03-test-coverage/03-02-SUMMARY.md

# E2E test infrastructure
@apps/e2e-tests/playwright.config.ts
@apps/e2e-tests/tests/fixtures/auth.fixture.ts

**Tech stack:** Playwright 1.50.0, Chromium, auth fixtures
**Skipped tests location:** 12 files with 51 total .skip() occurrences
</context>

<tasks>

<task type="auto">
  <name>Task 1: Analyze and categorize skipped E2E tests</name>
  <files>apps/e2e-tests/tests/</files>
  <action>
Analyze each skipped test to categorize into:
1. **ENABLE** - Test is valid and passes when unskipped
2. **FIX** - Test is valuable but needs updates (selector changes, timing, etc.)
3. **DELETE** - Test is obsolete, redundant, or tests removed feature

For each file with skipped tests:
1. Read the test file and understand what it tests
2. Identify why it was likely skipped (comments, error patterns)
3. Categorize each skipped test
4. Document in a triage table

Files to analyze (12 files, 51 skips):
- tenant-portal.staging.spec.ts (1)
- lease-template-pdf-generation.spec.ts (1)
- financial-statements.e2e.spec.ts (11)
- lease-signature-flow.e2e.spec.ts (17)
- complete-owner-journey.e2e.spec.ts (3)
- manage-legacy.e2e.spec.ts (4)
- tenant-invitation-flow.e2e.spec.ts (1)
- tenant-invitation-flow.property.spec.ts (5)
- texas-lease-generation.spec.ts (1)
- health.prod.spec.ts (1)
- tenant-onboarding.e2e.spec.ts (5)
- health-check.spec.ts (1)

Create analysis output document: apps/e2e-tests/SKIPPED_TEST_TRIAGE.md
  </action>
  <verify>SKIPPED_TEST_TRIAGE.md exists with all 51 tests categorized</verify>
  <done>All skipped tests categorized with clear reasoning</done>
</task>

<task type="auto">
  <name>Task 2: Execute triage decisions</name>
  <files>apps/e2e-tests/tests/</files>
  <action>
Execute the triage decisions from Task 1:

**For ENABLE tests:**
- Remove .skip() and run to verify they pass
- If they fail, move to FIX category

**For DELETE tests:**
- Remove the entire test block
- Add brief comment if removing significant test explaining why

**For FIX tests (if time permits):**
- Fix obvious issues (updated selectors, timing)
- For complex fixes, leave skipped with TODO comment for future

Priority: Enable > Delete > Fix (quick fixes only)

Run E2E suite after changes to verify no regressions:
pnpm test:e2e -- --reporter=list
  </action>
  <verify>pnpm test:e2e runs without errors, skipped count reduced</verify>
  <done>Triage decisions executed, skipped count documented (before/after)</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>E2E test triage complete - tests enabled, deleted, or fixed</what-built>
  <how-to-verify>
    1. Run: pnpm test:e2e -- --reporter=list
    2. Review output for:
       - No unexpected failures
       - Reduced skip count (target: <20 skipped)
       - Tests that run complete successfully
    3. Check SKIPPED_TEST_TRIAGE.md for documented decisions
  </how-to-verify>
  <resume-signal>Type "approved" if E2E suite looks healthy, or describe issues to address</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] SKIPPED_TEST_TRIAGE.md documents all decisions
- [ ] `pnpm test:e2e` runs without errors
- [ ] Skipped test count reduced (target: <20 from 51)
- [ ] No test regressions introduced
</verification>

<success_criteria>
- All 51 skipped tests triaged with documented reasoning
- Skipped count reduced significantly (target: <20)
- E2E suite runs cleanly
- Phase 3 complete
</success_criteria>

<output>
After completion, create `.planning/phases/03-test-coverage/03-03-SUMMARY.md` using summary template.

Include in summary:
- Before/after skip counts
- Tests enabled (count)
- Tests deleted (count + reasons)
- Tests fixed (count)
- Tests remaining skipped (count + reasons)
</output>
