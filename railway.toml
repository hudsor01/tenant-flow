[build]
builder = "DOCKERFILE"
dockerfilePath = "./Dockerfile"

[deploy]
# Fixed path - NestJS builds to dist/main.js from the backend directory
startCommand = "cd apps/backend && node dist/main.js"
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10
healthcheckPath = "/health"
healthcheckTimeout = 30

[environments.production]
# Required environment variables (set these in Railway dashboard)
# DATABASE_URL = "postgresql://..."
# JWT_SECRET = "your-jwt-secret"
# RESEND_API_KEY = "re_..."

[variables]
NODE_ENV = "production"
PORT = "${{ PORT }}"
