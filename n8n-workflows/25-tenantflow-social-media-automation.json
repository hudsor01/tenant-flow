{
  "name": "TenantFlow Social Media Automation",
  "nodes": [
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "triggerAtHour": 10,
              "triggerAtMinute": 0
            },
            {
              "triggerAtHour": 14,
              "triggerAtMinute": 0
            },
            {
              "triggerAtHour": 18,
              "triggerAtMinute": 0
            }
          ]
        }
      },
      "id": "1",
      "name": "Daily Posting Schedule",
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.1,
      "position": [
        240,
        300
      ]
    },
    {
      "parameters": {
        "jsCode": "// Content topics for property management\nconst topics = [\n  'tenant screening tips',\n  'rental property maintenance',\n  'lease agreement best practices',\n  'landlord legal responsibilities', \n  'property investment strategies',\n  'rent collection automation',\n  'property inspection checklists',\n  'tenant communication tips',\n  'property marketing strategies',\n  'real estate market trends',\n  'property value optimization',\n  'seasonal property maintenance',\n  'tenant retention strategies',\n  'property insurance essentials',\n  'landlord tax deductions'\n];\n\n// Post types\nconst postTypes = [\n  'tip',\n  'question',\n  'statistic',\n  'educational',\n  'motivational',\n  'behind-the-scenes'\n];\n\n// Select random topic and type\nconst randomTopic = topics[Math.floor(Math.random() * topics.length)];\nconst randomType = postTypes[Math.floor(Math.random() * postTypes.length)];\n\n// Determine time of day for content optimization\nconst currentHour = new Date().getHours();\nlet timeContext = 'general';\nif (currentHour >= 6 && currentHour < 12) timeContext = 'morning';\nelse if (currentHour >= 12 && currentHour < 17) timeContext = 'afternoon';\nelse if (currentHour >= 17 && currentHour < 22) timeContext = 'evening';\n\nreturn { \n  json: { \n    topic: randomTopic,\n    postType: randomType,\n    timeContext: timeContext,\n    currentHour: currentHour\n  } \n};"
      },
      "id": "2",
      "name": "Select Content Topic",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        460,
        300
      ]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "http://localhost:11434/api/generate",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "model",
              "value": "llama3.2"
            },
            {
              "name": "prompt",
              "value": "Create engaging social media content for TenantFlow about '{{ $json.topic }}' as a '{{ $json.postType }}' post for {{ $json.timeContext }} time. \n\nGuidelines:\n- Keep it professional but engaging\n- Include 2-3 relevant hashtags\n- Add an emoji or two\n- Make it actionable for property managers/landlords\n- Length: 150-280 characters for Twitter, longer version for Facebook\n- Include a subtle call-to-action about TenantFlow\n\nCreate both:\n1. SHORT version (Twitter/X)\n2. LONG version (Facebook/LinkedIn)\n\nFormat as:\nSHORT: [content]\nLONG: [content]"
            },
            {
              "name": "stream",
              "value": false
            }
          ]
        },
        "options": {}
      },
      "id": "3",
      "name": "Generate Social Content (Ollama)",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [
        680,
        300
      ]
    },
    {
      "parameters": {
        "jsCode": "const response = $input.first().json;\nconst content = response.response;\n\n// Parse the generated content\nconst lines = content.split('\\n');\nconst shortLine = lines.find(line => line.toLowerCase().includes('short:'));\nconst longLine = lines.find(line => line.toLowerCase().includes('long:'));\n\nconst shortContent = shortLine ? shortLine.replace(/short:\\s*/i, '').trim() : content.substring(0, 280);\nconst longContent = longLine ? longLine.replace(/long:\\s*/i, '').trim() : content;\n\n// Add tracking parameters\nconst trackingUrl = 'https://tenantflow.com?utm_source=social&utm_medium=n8n&utm_campaign=automation';\n\nreturn {\n  json: {\n    shortContent: shortContent,\n    longContent: longContent,\n    trackingUrl: trackingUrl,\n    topic: $('Select Content Topic').item.json.topic,\n    postType: $('Select Content Topic').item.json.postType,\n    timestamp: new Date().toISOString()\n  }\n};"
      },
      "id": "4",
      "name": "Parse Content",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        900,
        300
      ]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://graph.facebook.com/v18.0/{{ $env.FACEBOOK_PAGE_ID }}/feed",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "access_token",
              "value": "={{ $env.FACEBOOK_ACCESS_TOKEN }}"
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "message",
              "value": "{{ $json.longContent }} Learn more: {{ $json.trackingUrl }}"
            }
          ]
        }
      },
      "id": "5",
      "name": "Post to Facebook",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [
        1120,
        200
      ]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.twitter.com/2/tweets",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "Bearer {{ $env.TWITTER_BEARER_TOKEN }}"
            },
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "text",
              "value": "{{ $json.shortContent }} {{ $json.trackingUrl }}"
            }
          ]
        }
      },
      "id": "6",
      "name": "Post to Twitter",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [
        1120,
        300
      ]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.linkedin.com/v2/ugcPosts",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "Bearer {{ $env.LINKEDIN_ACCESS_TOKEN }}"
            },
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "author",
              "value": "{{ $env.LINKEDIN_ORGANIZATION_ID }}"
            },
            {
              "name": "lifecycleState",
              "value": "PUBLISHED"
            },
            {
              "name": "specificContent",
              "value": {\n                \"com.linkedin.ugc.ShareContent\": {\n                  \"shareCommentary\": {\n                    \"text\": \"{{ $json.longContent }} Learn more: {{ $json.trackingUrl }}\"\n                  },\n                  \"shareMediaCategory\": \"NONE\"\n                }\n              }\n            },\n            {\n              \"name\": \"visibility\",\n              \"value\": {\n                \"com.linkedin.ugc.MemberNetworkVisibility\": \"PUBLIC\"\n              }\n            }\n          ]\n        }\n      },\n      \"id\": \"7\",\n      \"name\": \"Post to LinkedIn\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"typeVersion\": 4.1,\n      \"position\": [\n        1120,\n        400\n      ]\n    },\n    {\n      \"parameters\": {\n        \"operation\": \"write\",\n        \"filePathType\": \"absolute\",\n        \"fileName\": \"/home/user/tenantflow-content/social-posts/{{ new Date().toISOString().split('T')[0] }}-posts.json\",\n        \"data\": \"{{ JSON.stringify({\n  timestamp: $json.timestamp,\n  topic: $json.topic,\n  postType: $json.postType,\n  shortContent: $json.shortContent,\n  longContent: $json.longContent,\n  platforms: {\n    facebook: $('Post to Facebook').item.json,\n    twitter: $('Post to Twitter').item.json,\n    linkedin: $('Post to LinkedIn').item.json\n  }\n}, null, 2) }}\",\n        \"options\": {}\n      },\n      \"id\": \"8\",\n      \"name\": \"Save Post Data\",\n      \"type\": \"n8n-nodes-base.files\",\n      \"typeVersion\": 1,\n      \"position\": [\n        1340,\n        300\n      ]\n    },\n    {\n      \"parameters\": {\n        \"operation\": \"write\",\n        \"filePathType\": \"absolute\",\n        \"fileName\": \"/home/user/tenantflow-content/logs/social-media.log\",\n        \"data\": \"{{ new Date().toISOString() }} - Social media posts created and published\\nTopic: {{ $('Parse Content').item.json.topic }}\\nType: {{ $('Parse Content').item.json.postType }}\\nFacebook: {{ $('Post to Facebook').item.json.id ? 'Success' : 'Failed' }}\\nTwitter: {{ $('Post to Twitter').item.json.data ? 'Success' : 'Failed' }}\\nLinkedIn: {{ $('Post to LinkedIn').item.json.id ? 'Success' : 'Failed' }}\\n---\\n\",\n        \"options\": {\n          \"append\": true\n        }\n      },\n      \"id\": \"9\",\n      \"name\": \"Log Social Activity\",\n      \"type\": \"n8n-nodes-base.files\",\n      \"typeVersion\": 1,\n      \"position\": [\n        1560,\n        300\n      ]\n    }\n  ],\n  \"pinData\": {},\n  \"connections\": {\n    \"Daily Posting Schedule\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Select Content Topic\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Select Content Topic\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Generate Social Content (Ollama)\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Generate Social Content (Ollama)\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Parse Content\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Parse Content\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Post to Facebook\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Post to Twitter\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Post to LinkedIn\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Post to Facebook\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Save Post Data\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Post to Twitter\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Save Post Data\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Post to LinkedIn\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Save Post Data\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Save Post Data\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Log Social Activity\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  },\n  \"active\": true,\n  \"settings\": {\n    \"timezone\": \"America/New_York\",\n    \"saveManualExecutions\": true\n  },\n  \"versionId\": \"1\",\n  \"meta\": {\n    \"templateCreatedBy\": \"Claude\",\n    \"description\": \"Automated social media posting across Facebook, Twitter, and LinkedIn with local content generation\",\n    \"tags\": [\"social\", \"automation\", \"facebook\", \"twitter\", \"linkedin\", \"ollama\"]\n  }\n}"
      },
      "id": "8",
      "name": "Save Post Data",
      "type": "n8n-nodes-base.files",
      "typeVersion": 1,
      "position": [
        1340,
        300
      ]
    },
    {
      "parameters": {
        "operation": "write",
        "filePathType": "absolute",
        "fileName": "/home/user/tenantflow-content/logs/social-media.log",
        "data": "{{ new Date().toISOString() }} - Social media posts created and published\nTopic: {{ $('Parse Content').item.json.topic }}\nType: {{ $('Parse Content').item.json.postType }}\nFacebook: {{ $('Post to Facebook').item.json.id ? 'Success' : 'Failed' }}\nTwitter: {{ $('Post to Twitter').item.json.data ? 'Success' : 'Failed' }}\nLinkedIn: {{ $('Post to LinkedIn').item.json.id ? 'Success' : 'Failed' }}\n---\n",
        "options": {
          "append": true
        }
      },
      "id": "9",
      "name": "Log Social Activity",
      "type": "n8n-nodes-base.files",
      "typeVersion": 1,
      "position": [
        1560,
        300
      ]
    }
  ],
  "pinData": {},
  "connections": {
    "Daily Posting Schedule": {
      "main": [
        [
          {
            "node": "Select Content Topic",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Select Content Topic": {
      "main": [
        [
          {
            "node": "Generate Social Content (Ollama)",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Generate Social Content (Ollama)": {
      "main": [
        [
          {
            "node": "Parse Content",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Parse Content": {
      "main": [
        [
          {
            "node": "Post to Facebook",
            "type": "main",
            "index": 0
          },
          {
            "node": "Post to Twitter",
            "type": "main",
            "index": 0
          },
          {
            "node": "Post to LinkedIn",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Post to Facebook": {
      "main": [
        [
          {
            "node": "Save Post Data",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Post to Twitter": {
      "main": [
        [
          {
            "node": "Save Post Data",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Post to LinkedIn": {
      "main": [
        [
          {
            "node": "Save Post Data",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Save Post Data": {
      "main": [
        [
          {
            "node": "Log Social Activity",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": true,
  "settings": {
    "timezone": "America/New_York",
    "saveManualExecutions": true
  },
  "versionId": "1",
  "meta": {
    "templateCreatedBy": "Claude",
    "description": "Automated social media posting across Facebook, Twitter, and LinkedIn with local content generation",
    "tags": ["social", "automation", "facebook", "twitter", "linkedin", "ollama"]
  }
}