#!/bin/bash

# Pre-push hook - Ensures SEO files are up to date before pushing to remote
echo "ğŸ” Pre-push: Checking SEO files..."

# Generate fresh SEO files
npm run seo:generate > /dev/null 2>&1

# Check if there are any changes
if ! git diff --quiet HEAD -- public/sitemap*.xml public/robots.txt; then
  echo "âš ï¸  SEO files have changes that need to be committed:"
  git diff --name-only HEAD -- public/sitemap*.xml public/robots.txt
  echo ""
  echo "ğŸ—ºï¸  Auto-staging updated SEO files..."
  git add public/sitemap*.xml public/robots.txt
  git commit -m "ğŸ—ºï¸ Auto-update SEO files before push [skip ci]"
  echo "âœ… SEO files updated and committed"
else
  echo "âœ… SEO files are up to date"
fi

echo "ğŸš€ Pre-push checks complete!"
