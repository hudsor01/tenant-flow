# ==============================================================================
# TenantFlow E2E Test Environment Variables
# ==============================================================================
# This file documents all environment variables used in e2e tests.
# Copy to .env.local and fill in values, OR use Doppler for secret management.
#
# NOTE: All tests should be run with `doppler run --` prefix when using Doppler
# ==============================================================================

# ------------------------------------------------------------------------------
# Core Test Configuration
# ------------------------------------------------------------------------------
# Frontend base URL for navigation
PLAYWRIGHT_BASE_URL=http://localhost:3000

# Backend API base URL for API tests
NEXT_PUBLIC_API_BASE_URL=http://localhost:4600

# ------------------------------------------------------------------------------
# Authentication Credentials
# ------------------------------------------------------------------------------
# Owner/Admin account for testing
E2E_OWNER_EMAIL=test-owner@example.com
E2E_OWNER_PASSWORD=your-secure-password-here

# Tenant account for tenant journey tests
E2E_TENANT_EMAIL=test-tenant@example.com
E2E_TENANT_PASSWORD=your-secure-password-here

# Admin account (for staging tests)
E2E_ADMIN_EMAIL=test-admin@example.com
E2E_ADMIN_PASSWORD=your-secure-password-here

# Manager account (optional, for role-based tests)
E2E_MANAGER_EMAIL=test-manager@example.com
E2E_MANAGER_PASSWORD=your-secure-password-here

# ------------------------------------------------------------------------------
# API Testing
# ------------------------------------------------------------------------------
# JWT/Bearer token for API contract tests
# Can be obtained from Supabase auth or generated in setup
TEST_AUTH_TOKEN=your-jwt-token-here

# ------------------------------------------------------------------------------
# Third-Party Service Keys (Test Mode)
# ------------------------------------------------------------------------------
# Stripe test keys for payment flow testing
TEST_STRIPE_PUBLISHABLE_KEY=pk_test_...
TEST_STRIPE_SECRET_KEY=sk_test_...

# Supabase test project
TEST_SUPABASE_URL=https://your-project.supabase.co
TEST_SUPABASE_PUBLISHABLE_KEY=your-supabase-anon-key

# Resend test API key for email testing
TEST_RESEND_API_KEY=re_test_...
TEST_EMAIL_FROM=test@example.com

# ------------------------------------------------------------------------------
# Test Database Configuration
# ------------------------------------------------------------------------------
# Separate test database (recommended to avoid polluting dev data)
TEST_DATABASE_URL=postgresql://user:password@localhost:5432/tenantflow_test
TEST_DATABASE_HOST=localhost
TEST_DATABASE_PORT=5432
TEST_DATABASE_NAME=tenantflow_test
TEST_DATABASE_USER=postgres
TEST_DATABASE_PASSWORD=your-db-password

# E2E-specific database (if different from TEST_DATABASE)
E2E_DATABASE_URL=postgresql://user:password@localhost:5432/tenantflow_e2e
E2E_DATABASE_HOST=localhost
E2E_DATABASE_PORT=5432
E2E_DATABASE_NAME=tenantflow_e2e
E2E_DATABASE_USER=postgres
E2E_DATABASE_PASSWORD=your-db-password

# ------------------------------------------------------------------------------
# Staging/Production Testing (Optional)
# ------------------------------------------------------------------------------
# Staging environment URLs
STAGING_BASE_URL=https://staging.tenantflow.app
STAGING_ADMIN_EMAIL=staging-admin@example.com
STAGING_ADMIN_PASSWORD=your-staging-password

# Production health check URL
PROD_HEALTH_URL=https://api.tenantflow.app/health
NEXT_PUBLIC_APP_URL=https://tenantflow.app

# Production backend URL for monitoring tests
# NEXT_PUBLIC_API_BASE_URL=https://api.tenantflow.app

# ------------------------------------------------------------------------------
# Test Execution Controls
# ------------------------------------------------------------------------------
# Force run conditional tests (health checks, staging tests)
E2E_FORCE_RUN=false

# Enable debug logging in auth-helpers and other utilities
DEBUG=false

# Node environment
NODE_ENV=test

# Supabase URL check bypass
NEXT_PUBLIC_SB_URL=https://your-project.supabase.co

# ------------------------------------------------------------------------------
# Playwright Configuration Overrides (Optional)
# ------------------------------------------------------------------------------
# Backend health check URL (for health-check.spec.ts)
PLAYWRIGHT_BACKEND_HEALTH_URL=http://localhost:4600/health
BACKEND_HEALTH_URL=http://localhost:4600/health

# ------------------------------------------------------------------------------
# Usage Examples
# ------------------------------------------------------------------------------
# Run all e2e tests with Doppler:
#   doppler run -- pnpm --filter @repo/e2e-tests test
#
# Run specific test project:
#   doppler run -- pnpm --filter @repo/e2e-tests test:chromium
#
# Run with local .env.local file:
#   pnpm --filter @repo/e2e-tests test
#
# Debug mode with headed browser:
#   DEBUG=true doppler run -- pnpm --filter @repo/e2e-tests test --headed --debug
# ------------------------------------------------------------------------------
