# ===============================
# TENANT FLOW BACKEND - ENVIRONMENT VARIABLES
# ===============================
# Copy this file to .env.local and fill in your actual values
# Variables marked [REQUIRED] must be set for the application to run
# Variables marked [OPTIONAL] have defaults or are not critical for development

# ===============================
# APPLICATION CONFIGURATION
# ===============================
NODE_ENV=development
# [REQUIRED] Application environment: development, production, test

PORT=3001
# [OPTIONAL] Backend server port (default: 3001)

# ===============================
# DATABASE CONFIGURATION  
# ===============================
DATABASE_URL=postgresql://your_username:your_password@localhost:5432/tenantflow_dev
# [REQUIRED] Main PostgreSQL database connection string
# Format: postgresql://username:password@host:port/database

DIRECT_URL=postgresql://your_username:your_password@localhost:5432/tenantflow_dev  
# [REQUIRED] Direct database connection for Prisma migrations
# Usually same as DATABASE_URL unless using connection pooling

DATABASE_MAX_CONNECTIONS=10
# [OPTIONAL] Maximum database connections in pool

DATABASE_CONNECTION_TIMEOUT=5000
# [OPTIONAL] Database connection timeout in milliseconds

# ===============================
# AUTHENTICATION & SECURITY
# ===============================
JWT_SECRET=your-super-secure-jwt-secret-key-min-32-chars
# [REQUIRED] JWT signing secret (minimum 32 characters for security)

JWT_EXPIRES_IN=7d
# [OPTIONAL] JWT token expiration time (default: 7d)

SESSION_SECRET=your-super-secure-session-secret-min-32-chars
# [OPTIONAL] Session secret for additional security features

CSRF_SECRET=your-csrf-secret-key
# [OPTIONAL] CSRF protection secret

# ===============================
# SUPABASE CONFIGURATION
# ===============================
SUPABASE_URL=https://your-project-id.supabase.co
# [REQUIRED] Your Supabase project URL
# Get from: Supabase Dashboard > Settings > API > Project URL

SUPABASE_SERVICE_ROLE_KEY=your-supabase-service-role-key
# [REQUIRED] Supabase service role key (bypasses RLS for admin operations)
# Get from: Supabase Dashboard > Settings > API > service_role secret

SUPABASE_JWT_SECRET=your-supabase-jwt-secret
# [REQUIRED] JWT secret from Supabase (for token verification)
# Get from: Supabase Dashboard > Settings > API > JWT Settings > JWT Secret

# ===============================
# CORS CONFIGURATION
# ===============================
CORS_ORIGINS=http://localhost:3000,http://localhost:3001
# [REQUIRED] Comma-separated list of allowed frontend origins
# Production example: https://app.yourdomain.com,https://yourdomain.com

# ===============================
# STRIPE PAYMENTS (OPTIONAL FOR DEVELOPMENT)
# ===============================
STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key_here
# [OPTIONAL] Stripe secret key - use test keys for development
# Get from: Stripe Dashboard > Developers > API keys

STRIPE_PUBLISHABLE_KEY=pk_test_your_stripe_publishable_key_here
# [OPTIONAL] Stripe publishable key

STRIPE_WEBHOOK_SECRET=whsec_your_webhook_endpoint_secret
# [OPTIONAL] Webhook endpoint secret from Stripe
# Get from: Stripe Dashboard > Developers > Webhooks > [Your Endpoint]

# Stripe Price IDs for subscription plans
STRIPE_PRICE_ID_STARTER=price_starter_monthly_id
STRIPE_PRICE_ID_GROWTH=price_growth_monthly_id  
STRIPE_PRICE_ID_BUSINESS=price_business_monthly_id
STRIPE_PRICE_ID_TENANTFLOW_MAX=price_tenantflow_max_monthly_id

# ===============================
# RATE LIMITING
# ===============================
RATE_LIMIT_TTL=60000
# [OPTIONAL] Rate limit time window in milliseconds (default: 60000 = 1 minute)

RATE_LIMIT_LIMIT=100
# [OPTIONAL] Maximum requests per time window (default: 100)

ENABLE_RATE_LIMITING=true
# [OPTIONAL] Enable/disable rate limiting (default: true)

# ===============================
# REDIS CACHING (OPTIONAL)
# ===============================
REDIS_URL=redis://localhost:6379
# [OPTIONAL] Redis connection URL for caching and sessions

REDIS_HOST=localhost
# [OPTIONAL] Redis host (alternative to REDIS_URL)

REDIS_PORT=6379
# [OPTIONAL] Redis port

REDIS_PASSWORD=your-redis-password
# [OPTIONAL] Redis password if authentication is enabled

REDIS_DB=0
# [OPTIONAL] Redis database number (default: 0)

# ===============================
# LOGGING & MONITORING
# ===============================
LOG_LEVEL=info
# [OPTIONAL] Logging level: error, warn, info, debug (default: info)

ENABLE_METRICS=false
# [OPTIONAL] Enable Prometheus metrics endpoint (default: false)

ENABLE_SWAGGER=true
# [OPTIONAL] Enable Swagger API documentation in development (default: false)

# ===============================
# FILE STORAGE
# ===============================
STORAGE_PROVIDER=supabase
# [OPTIONAL] Storage provider: local, supabase, s3 (default: supabase)

STORAGE_BUCKET=tenant-flow-storage
# [OPTIONAL] Storage bucket name (default: tenant-flow-storage)

# ===============================
# EMAIL CONFIGURATION (OPTIONAL)
# ===============================
SMTP_HOST=smtp.gmail.com
# [OPTIONAL] SMTP server hostname

SMTP_PORT=587
# [OPTIONAL] SMTP server port (587 for TLS, 465 for SSL)

SMTP_USER=your-email@example.com
# [OPTIONAL] SMTP username/email

SMTP_PASS=your-app-password
# [OPTIONAL] SMTP password or app-specific password

FROM_EMAIL=noreply@yourdomain.com
# [OPTIONAL] Default sender email address

# ===============================
# TESTING CONFIGURATION
# ===============================
# Only needed when running tests locally
TEST_DATABASE_URL=postgresql://your_username:your_password@localhost:5432/tenantflow_test

# ===============================
# DEVELOPMENT FEATURES
# ===============================
# These should be disabled in production

# Enable detailed error responses (disable in production)
ENABLE_DETAILED_ERRORS=true

# Enable CORS for all origins in development (never use in production)
ENABLE_CORS_ALL=false

# ===============================
# SECURITY NOTES
# ===============================
# 1. Never commit actual secrets to version control
# 2. Use strong, unique passwords and secrets (minimum 32 characters)
# 3. JWT_SECRET and SUPABASE_JWT_SECRET must match your Supabase configuration
# 4. In production, use HTTPS-only CORS origins
# 5. Rotate secrets regularly in production environments
# 6. Use environment-specific values (dev/staging/production)

# ===============================
# PRODUCTION DEPLOYMENT CHECKLIST
# ===============================
# When deploying to production:
# 
# ✅ Set NODE_ENV=production
# ✅ Use strong secrets (32+ characters)
# ✅ Configure CORS_ORIGINS with your actual domain
# ✅ Set up proper DATABASE_URL (with connection pooling if needed)
# ✅ Configure Stripe with live keys (not test keys)
# ✅ Set up proper monitoring and logging
# ✅ Enable rate limiting for security
# ✅ Disable ENABLE_SWAGGER in production
# ✅ Use secure HTTPS endpoints only
# 
# Railway/Heroku specific:
# - DATABASE_URL is usually provided by the platform
# - PORT is set automatically by the platform
# - Set all other variables in the platform's environment settings

# ===============================
# LOCAL DEVELOPMENT QUICK START
# ===============================
# 1. Copy this file to .env.local
# 2. Update DATABASE_URL with your local PostgreSQL credentials
# 3. Get Supabase credentials from your project dashboard
# 4. Run: npm run db:migrate
# 5. Run: npm run dev
# 
# For Stripe testing (optional):
# 6. Get test API keys from Stripe Dashboard
# 7. Set up webhook endpoint with ngrok for local testing