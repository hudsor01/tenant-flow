{"version":3,"file":"property-isolation.integration.spec.js","sourceRoot":"","sources":["property-isolation.integration.spec.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * Backend RLS Integration Tests: Property Isolation\n *\n * Tests that property table and related RLS policies correctly enforce data isolation:\n * - owners can only see/manage their own properties\n * - owners cannot access other owners' properties\n * - Tenants cannot view property management data\n * - Unit isolation follows property ownership\n *\n * @group integration\n * @group rls\n * @group security\n */\n\nimport { describe, it, expect, beforeAll, afterAll } from '@jest/globals'\nimport {\n\tauthenticateAs,\n\texpectEmptyResult,\n\texpectPermissionError,\n\tgetServiceRoleClient,\n\tTEST_USERS,\n\ttype AuthenticatedTestClient\n} from './setup'\nimport type { Database } from '@repo/shared/types/supabase-generated'\n\ntype PropertyRow = Database['public']['Tables']['property']['Row']\ntype UnitRow = Database['public']['Tables']['unit']['Row']\n\ndescribe('RLS: Property Isolation', () => {\n\tlet ownerA: AuthenticatedTestClient\n\tlet ownerB: AuthenticatedTestClient\n\tlet tenantA: AuthenticatedTestClient\n\tlet serviceClient: ReturnType<typeof getServiceRoleClient>\n\n\t// Test data IDs for cleanup\n\tconst testData = {\n\t\tproperties: [] as string[],\n\t\tunits: [] as string[]\n\t}\n\n\tbeforeAll(async () => {\n\t\townerA = await authenticateAs(TEST_USERS.owner_A)\n\t\townerB = await authenticateAs(TEST_USERS.owner_B)\n\t\ttenantA = await authenticateAs(TEST_USERS.TENANT_A)\n\t\tserviceClient = getServiceRoleClient()\n\t})\n\n\tafterAll(async () => {\n\t\t// Cleanup units first (foreign key constraint)\n\t\tfor (const id of testData.units) {\n\t\t\tawait serviceClient.from('unit').delete().eq('id', id)\n\t\t}\n\t})\n\n\tdescribe('Property Ownership Access', () => {\n\t\tlet ownerAPropertyId: string\n\t\tlet ownerBPropertyId: string\n\n\t\tbeforeAll(async () => {\n\t\t\t// Get owner A's first property\n\t\t\tconst { data: propertyA } = await serviceClient\n\t\t\t\t.from('property')\n\t\t\t\t.select('id')\n\t\t\t\t.eq('ownerId', ownerA.userId)\n\t\t\t\t.limit(1)\n\t\t\t\t.single()\n\n\t\t\t// Get owner B's first property\n\t\t\tconst { data: propertyB } = await serviceClient\n\t\t\t\t.from('property')\n\t\t\t\t.select('id')\n\t\t\t\t.eq('ownerId', ownerB.userId)\n\t\t\t\t.limit(1)\n\t\t\t\t.single()\n\n\t\t\tif (propertyA) ownerAPropertyId = propertyA.id\n\t\t\tif (propertyB) ownerBPropertyId = propertyB.id\n\t\t})\n\n\t\tit('owner A can read their own properties', async () => {\n\t\t\tconst { data, error } = await ownerA.client\n\t\t\t\t.from('property')\n\t\t\t\t.select('*')\n\t\t\t\t.eq('ownerId', ownerA.userId)\n\n\t\t\texpect(error).toBeNull()\n\t\t\texpect(data).toBeDefined()\n\t\t\texpect(Array.isArray(data)).toBe(true)\n\n\t\t\t// All returned properties must belong to owner A\n\t\t\tif (data && data.length > 0) {\n\t\t\t\tfor (const property of data) {\n\t\t\t\t\texpect(property.ownerId).toBe(ownerA.userId)\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\n\t\tit('owner A cannot read owner B properties', async () => {\n\t\t\tif (!ownerBPropertyId) {\n\t\t\t\tconsole.warn('owner B has no properties - skipping test')\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tconst { data, error } = await ownerA.client\n\t\t\t\t.from('property')\n\t\t\t\t.select('*')\n\t\t\t\t.eq('id', ownerBPropertyId)\n\n\t\t\texpect(error).toBeNull()\n\t\t\texpectEmptyResult(data, 'owner A querying owner B property')\n\t\t})\n\n\t\tit('owner A can update their own property', async () => {\n\t\t\tif (!ownerAPropertyId) {\n\t\t\t\tconsole.warn('owner A has no properties - skipping test')\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tconst { data, error } = await ownerA.client\n\t\t\t\t.from('property')\n\t\t\t\t.update({ name: `Updated Property ${Date.now()}` })\n\t\t\t\t.eq('id', ownerAPropertyId)\n\t\t\t\t.select()\n\t\t\t\t.single()\n\n\t\t\texpect(error).toBeNull()\n\t\t\texpect(data).toBeDefined()\n\t\t})\n\n\t\tit('owner A cannot update owner B property', async () => {\n\t\t\tif (!ownerBPropertyId) {\n\t\t\t\tconsole.warn('owner B has no properties - skipping test')\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tconst { data, error } = await ownerA.client\n\t\t\t\t.from('property')\n\t\t\t\t.update({ name: 'Hacked Property' })\n\t\t\t\t.eq('id', ownerBPropertyId)\n\t\t\t\t.select()\n\n\t\t\t// MUST fail or return empty\n\t\t\tif (error) {\n\t\t\t\texpectPermissionError(error, 'owner A updating owner B property')\n\t\t\t} else {\n\t\t\t\texpectEmptyResult(data, 'owner A updating owner B property')\n\t\t\t}\n\t\t})\n\n\t\tit('tenant cannot read property management data', async () => {\n\t\t\tif (!ownerAPropertyId) {\n\t\t\t\tconsole.warn('owner A has no properties - skipping test')\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tconst { data, error } = await tenantA.client\n\t\t\t\t.from('property')\n\t\t\t\t.select('*')\n\t\t\t\t.eq('id', ownerAPropertyId)\n\n\t\t\texpect(error).toBeNull()\n\t\t\texpectEmptyResult(data, 'tenant querying property management data')\n\t\t})\n\n\t\tit('tenant cannot list all properties', async () => {\n\t\t\tconst { data, error } = await tenantA.client.from('property').select('*')\n\n\t\t\texpect(error).toBeNull()\n\t\t\texpectEmptyResult(data, 'tenant listing all properties')\n\t\t})\n\t})\n\n\tdescribe('Property Creation', () => {\n\t\tit('owner A can create property', async () => {\n\t\t\tconst newProperty: Database['public']['Tables']['property']['Insert'] = {\n\t\t\t\tname: `TEST Property ${Date.now()}`,\n\t\t\t\tpropertyType: 'SINGLE_FAMILY',\n\t\t\t\taddress: '123 Test St',\n\t\t\t\tcity: 'Test City',\n\t\t\t\tstate: 'TS',\n\t\t\t\tzipCode: '12345',\n\t\t\t\townerId: ownerA.userId\n\t\t\t}\n\n\t\t\tconst { data, error } = await ownerA.client\n\t\t\t\t.from('property')\n\t\t\t\t.insert(newProperty)\n\t\t\t\t.select()\n\t\t\t\t.single<PropertyRow>()\n\n\t\t\texpect(error).toBeNull()\n\t\t\texpect(data).toBeDefined()\n\t\t\texpect(data?.ownerId).toBe(ownerA.userId)\n\n\t\t\tif (data) {\n\t\t\t\ttestData.properties.push(data.id)\n\t\t\t}\n\t\t})\n\n\t\tit('owner A cannot create property for owner B', async () => {\n\t\t\tconst maliciousProperty: Database['public']['Tables']['property']['Insert'] =\n\t\t\t\t{\n\t\t\t\t\tname: 'Spoofed Property',\n\t\t\t\t\tpropertyType: 'APARTMENT',\n\t\t\t\t\townerId: ownerB.userId, // Attempt to spoof owner\n\t\t\t\t\taddress: '123 Fake St',\n\t\t\t\t\tcity: 'Fake City',\n\t\t\t\t\tstate: 'CA',\n\t\t\t\t\tzipCode: '12345'\n\t\t\t\t}\n\n\t\t\tconst { data, error } = await ownerA.client\n\t\t\t\t.from('property')\n\t\t\t\t.insert(maliciousProperty)\n\t\t\t\t.select()\n\n\t\t\t// MUST fail due to RLS policy check (ownerId = auth.uid())\n\t\t\texpectPermissionError(error, 'owner A creating property for owner B')\n\t\t\texpect(data).toBeNull()\n\t\t})\n\n\t\tit('tenant cannot create property', async () => {\n\t\t\tconst property: Database['public']['Tables']['property']['Insert'] = {\n\t\t\t\tname: 'Tenant Spoofed Property',\n\t\t\t\tpropertyType: 'CONDO',\n\t\t\t\townerId: tenantA.userId,\n\t\t\t\taddress: '456 Fake Ave',\n\t\t\t\tcity: 'Fake City',\n\t\t\t\tstate: 'CA',\n\t\t\t\tzipCode: '12345'\n\t\t\t}\n\n\t\t\tconst { data, error } = await tenantA.client\n\t\t\t\t.from('property')\n\t\t\t\t.insert(property)\n\t\t\t\t.select()\n\n\t\t\t// MUST fail - tenants have no INSERT policy\n\t\t\texpectPermissionError(error, 'tenant creating property')\n\t\t\texpect(data).toBeNull()\n\t\t})\n\t})\n\n\tdescribe('Unit Isolation', () => {\n\t\tlet ownerAPropertyId: string\n\t\tlet ownerAUnitId: string\n\t\tlet ownerBPropertyId: string\n\t\tlet ownerBUnitId: string\n\n\t\tbeforeAll(async () => {\n\t\t\t// Get owner A's property and unit\n\t\t\tconst { data: propertyA } = await serviceClient\n\t\t\t\t.from('property')\n\t\t\t\t.select('id')\n\t\t\t\t.eq('ownerId', ownerA.userId)\n\t\t\t\t.limit(1)\n\t\t\t\t.single()\n\n\t\t\tif (propertyA) {\n\t\t\t\townerAPropertyId = propertyA.id\n\n\t\t\t\tconst { data: unitA } = await serviceClient\n\t\t\t\t\t.from('unit')\n\t\t\t\t\t.select('id')\n\t\t\t\t\t.eq('propertyId', propertyA.id)\n\t\t\t\t\t.limit(1)\n\t\t\t\t\t.single()\n\n\t\t\t\tif (unitA) ownerAUnitId = unitA.id\n\t\t\t}\n\n\t\t\t// Get owner B's property and unit\n\t\t\tconst { data: propertyB } = await serviceClient\n\t\t\t\t.from('property')\n\t\t\t\t.select('id')\n\t\t\t\t.eq('ownerId', ownerB.userId)\n\t\t\t\t.limit(1)\n\t\t\t\t.single()\n\n\t\t\tif (propertyB) {\n\t\t\t\townerBPropertyId = propertyB.id\n\n\t\t\t\tconst { data: unitB } = await serviceClient\n\t\t\t\t\t.from('unit')\n\t\t\t\t\t.select('id')\n\t\t\t\t\t.eq('propertyId', propertyB.id)\n\t\t\t\t\t.limit(1)\n\t\t\t\t\t.single()\n\n\t\t\t\tif (unitB) ownerBUnitId = unitB.id\n\t\t\t}\n\t\t})\n\n\t\tit('owner A can read units in their own property', async () => {\n\t\t\tif (!ownerAPropertyId) {\n\t\t\t\tconsole.warn('owner A has no properties - skipping test')\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tconst { data, error } = await ownerA.client\n\t\t\t\t.from('unit')\n\t\t\t\t.select('*')\n\t\t\t\t.eq('propertyId', ownerAPropertyId)\n\n\t\t\texpect(error).toBeNull()\n\t\t\texpect(data).toBeDefined()\n\t\t})\n\n\t\tit('owner A cannot read units in owner B property', async () => {\n\t\t\tif (!ownerBPropertyId) {\n\t\t\t\tconsole.warn('owner B has no properties - skipping test')\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tconst { data, error } = await ownerA.client\n\t\t\t\t.from('unit')\n\t\t\t\t.select('*')\n\t\t\t\t.eq('propertyId', ownerBPropertyId)\n\n\t\t\texpect(error).toBeNull()\n\t\t\texpectEmptyResult(data, 'owner A querying units in owner B property')\n\t\t})\n\n\t\tit('owner A can create unit in their own property', async () => {\n\t\t\tif (!ownerAPropertyId) {\n\t\t\t\tconsole.warn('owner A has no properties - skipping test')\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tconst newUnit: Database['public']['Tables']['unit']['Insert'] = {\n\t\t\t\tpropertyId: ownerAPropertyId,\n\t\t\t\tunitNumber: `TEST-${Date.now()}`,\n\t\t\t\tbedrooms: 2,\n\t\t\t\tbathrooms: 1,\n\t\t\t\trent: 1500,\n\t\t\t\tstatus: 'VACANT'\n\t\t\t}\n\n\t\t\tconst { data, error } = await ownerA.client\n\t\t\t\t.from('unit')\n\t\t\t\t.insert(newUnit)\n\t\t\t\t.select()\n\t\t\t\t.single<UnitRow>()\n\n\t\t\texpect(error).toBeNull()\n\t\t\texpect(data).toBeDefined()\n\n\t\t\tif (data) {\n\t\t\t\ttestData.units.push(data.id)\n\t\t\t}\n\t\t})\n\n\t\tit('owner A cannot create unit in owner B property', async () => {\n\t\t\tif (!ownerBPropertyId) {\n\t\t\t\tconsole.warn('owner B has no properties - skipping test')\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tconst maliciousUnit: Database['public']['Tables']['unit']['Insert'] = {\n\t\t\t\tpropertyId: ownerBPropertyId, // Attempt to create unit in another owner's property\n\t\t\t\tunitNumber: 'HACKED-UNIT',\n\t\t\t\tbedrooms: 1,\n\t\t\t\tbathrooms: 1,\n\t\t\t\trent: 1200,\n\t\t\t\tstatus: 'VACANT'\n\t\t\t}\n\n\t\t\tconst { data, error } = await ownerA.client\n\t\t\t\t.from('unit')\n\t\t\t\t.insert(maliciousUnit)\n\t\t\t\t.select()\n\n\t\t\t// MUST fail due to RLS policy (propertyId must belong to auth.uid())\n\t\t\texpectPermissionError(error, 'owner A creating unit in owner B property')\n\t\t\texpect(data).toBeNull()\n\t\t})\n\n\t\tit('owner A can update unit in their own property', async () => {\n\t\t\tif (!ownerAUnitId) {\n\t\t\t\tconsole.warn('owner A has no units - skipping test')\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tconst { data, error } = await ownerA.client\n\t\t\t\t.from('unit')\n\t\t\t\t.update({ bedrooms: 3 })\n\t\t\t\t.eq('id', ownerAUnitId)\n\t\t\t\t.select()\n\t\t\t\t.single()\n\n\t\t\texpect(error).toBeNull()\n\t\t\texpect(data).toBeDefined()\n\t\t\texpect(data?.bedrooms).toBe(3)\n\t\t})\n\n\t\tit('owner A cannot update unit in owner B property', async () => {\n\t\t\tif (!ownerBUnitId) {\n\t\t\t\tconsole.warn('owner B has no units - skipping test')\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tconst { data, error } = await ownerA.client\n\t\t\t\t.from('unit')\n\t\t\t\t.update({ bedrooms: 99 })\n\t\t\t\t.eq('id', ownerBUnitId)\n\t\t\t\t.select()\n\n\t\t\t// MUST fail or return empty\n\t\t\tif (error) {\n\t\t\t\texpectPermissionError(\n\t\t\t\t\terror,\n\t\t\t\t\t'owner A updating unit in owner B property'\n\t\t\t\t)\n\t\t\t} else {\n\t\t\t\texpectEmptyResult(data, 'owner A updating unit in owner B property')\n\t\t\t}\n\t\t})\n\t})\n\n\tdescribe('Property Status Transitions', () => {\n\t\tlet testPropertyId: string\n\n\t\tbeforeAll(async () => {\n\t\t\t// Create a test property for status transition tests\n\t\t\tconst { data } = await serviceClient\n\t\t\t\t.from('property')\n\t\t\t\t.insert({\n\t\t\t\t\tname: 'Test Property',\n\t\t\t\t\tpropertyType: 'SINGLE_FAMILY',\n\t\t\t\t\townerId: ownerA.userId,\n\t\t\t\t\taddress: '123 Test St',\n\t\t\t\t\tcity: 'Test City',\n\t\t\t\t\tstate: 'CA',\n\t\t\t\t\tzipCode: '12345'\n\t\t\t\t})\n\t\t\t\t.select()\n\t\t\t\t.single()\n\n\t\t\tif (data) {\n\t\t\t\ttestPropertyId = data.id\n\t\t\t\ttestData.properties.push(data.id)\n\t\t\t}\n\t\t})\n\n\t\tit('owner A can mark their property as sold', async () => {\n\t\t\tif (!testPropertyId) {\n\t\t\t\tconsole.warn('Test property not created - skipping test')\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tconst { data, error } = await ownerA.client\n\t\t\t\t.from('property')\n\t\t\t\t.update({\n\t\t\t\t\tstatus: 'SOLD',\n\t\t\t\t\tdate_sold: new Date().toISOString(),\n\t\t\t\t\tsale_price: 500000\n\t\t\t\t})\n\t\t\t\t.eq('id', testPropertyId)\n\t\t\t\t.select()\n\t\t\t\t.single()\n\n\t\t\texpect(error).toBeNull()\n\t\t\texpect(data?.status).toBe('SOLD')\n\t\t})\n\n\t\tit('owner B cannot mark owner A property as sold', async () => {\n\t\t\tif (!testPropertyId) {\n\t\t\t\tconsole.warn('Test property not created - skipping test')\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tconst { data, error } = await ownerB.client\n\t\t\t\t.from('property')\n\t\t\t\t.update({ status: 'SOLD' })\n\t\t\t\t.eq('id', testPropertyId)\n\t\t\t\t.select()\n\n\t\t\t// MUST fail or return empty\n\t\t\tif (error) {\n\t\t\t\texpectPermissionError(error, 'owner B updating owner A property status')\n\t\t\t} else {\n\t\t\t\texpectEmptyResult(data, 'owner B updating owner A property status')\n\t\t\t}\n\t\t})\n\t})\n\n\tdescribe('Property Metadata Access', () => {\n\t\tit('owner A can read property metadata (address, features)', async () => {\n\t\t\tconst { data, error } = await ownerA.client\n\t\t\t\t.from('property')\n\t\t\t\t.select(\n\t\t\t\t\t'id, name, address, city, state, zipCode, propertyType, description'\n\t\t\t\t)\n\t\t\t\t.eq('ownerId', ownerA.userId)\n\t\t\t\t.limit(1)\n\n\t\t\texpect(error).toBeNull()\n\t\t\texpect(data).toBeDefined()\n\t\t})\n\n\t\tit('tenant cannot access property owner information', async () => {\n\t\t\tconst { data, error } = await tenantA.client\n\t\t\t\t.from('property')\n\t\t\t\t.select('ownerId, createdAt, updatedAt')\n\n\t\t\texpect(error).toBeNull()\n\t\t\texpectEmptyResult(data, 'tenant accessing property ownership data')\n\t\t})\n\t})\n})\n"]}