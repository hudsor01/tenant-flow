/**
 * Button Utility Classes
 * 
 * Performance-optimized CSS utilities for buttons using modern CSS features.
 * These utilities work with your existing Tailwind setup.
 */

/* ============================================================================
   BUTTON FOCUS IMPROVEMENTS
   ============================================================================ */

.btn-focus-ring {
  @apply outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 focus-visible:ring-offset-background;
}

/* Enhanced focus for better accessibility */
.btn-focus-enhanced {
  @apply outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 focus-visible:ring-offset-background transition-all duration-200;
  
  /* High contrast mode support */
  @media (prefers-contrast: high) {
    @apply focus-visible:ring-4;
  }
  
  /* Reduced motion support */
  @media (prefers-reduced-motion: reduce) {
    @apply transition-none;
  }
}

/* ============================================================================
   BUTTON LOADING STATES
   ============================================================================ */

.btn-loading {
  @apply relative pointer-events-none;
}

.btn-loading::after {
  content: '';
  @apply absolute inset-0 bg-current opacity-10 rounded-[inherit];
}

/* Shimmer loading effect */
.btn-shimmer {
  @apply relative overflow-hidden;
}

.btn-shimmer::before {
  content: '';
  @apply absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent;
  animation: shimmer 2s infinite;
  transform: translateX(-100%);
}

@keyframes shimmer {
  100% {
    transform: translateX(100%);
  }
}

/* ============================================================================
   BUTTON HOVER EFFECTS
   ============================================================================ */

.btn-hover-lift {
  @apply transition-transform duration-200;
}

.btn-hover-lift:hover:not(:disabled) {
  @apply -translate-y-0.5 shadow-lg;
}

.btn-hover-glow {
  @apply relative overflow-visible;
}

.btn-hover-glow:hover:not(:disabled)::before {
  content: '';
  @apply absolute inset-[-2px] bg-current opacity-20 blur-sm rounded-[inherit] z-[-1];
}

/* ============================================================================
   ICON ALIGNMENT UTILITIES
   ============================================================================ */

.btn-icon-left {
  @apply inline-flex items-center gap-2;
}

.btn-icon-left > svg:first-child {
  @apply shrink-0;
}

.btn-icon-right {
  @apply inline-flex items-center gap-2;
}

.btn-icon-right > svg:last-child {
  @apply shrink-0;
}

/* Prevent icon bleeding outside button bounds */
.btn-icon-contained {
  @apply overflow-hidden;
}

.btn-icon-contained > * {
  @apply shrink-0;
}

/* ============================================================================
   RESPONSIVE BUTTON PATTERNS
   ============================================================================ */

.btn-responsive {
  @apply text-sm px-3 py-2;
  @apply sm:text-base sm:px-4 sm:py-2;
  @apply lg:px-6 lg:py-3;
}

/* Mobile-first button sizing */
.btn-mobile-friendly {
  @apply min-h-[44px] px-4;
  @apply touch-manipulation;
}

/* ============================================================================
   BUTTON GROUP UTILITIES
   ============================================================================ */

.btn-group-horizontal {
  @apply inline-flex;
}

.btn-group-horizontal > :not(:first-child) {
  @apply -ml-px;
}

.btn-group-horizontal > :not(:first-child):not(:last-child) {
  @apply rounded-none;
}

.btn-group-horizontal > :first-child {
  @apply rounded-r-none;
}

.btn-group-horizontal > :last-child {
  @apply rounded-l-none;
}

.btn-group-vertical {
  @apply inline-flex flex-col;
}

.btn-group-vertical > :not(:first-child) {
  @apply -mt-px;
}

.btn-group-vertical > :not(:first-child):not(:last-child) {
  @apply rounded-none;
}

.btn-group-vertical > :first-child {
  @apply rounded-b-none;
}

.btn-group-vertical > :last-child {
  @apply rounded-t-none;
}

/* ============================================================================
   ACCESSIBILITY UTILITIES
   ============================================================================ */

.btn-sr-only-enhanced {
  @apply sr-only;
}

/* Show on focus for keyboard users */
.btn-sr-only-enhanced:focus {
  @apply not-sr-only absolute top-0 left-0 bg-primary text-primary-foreground px-2 py-1 rounded text-sm z-50;
}

/* High contrast mode improvements */
@media (prefers-contrast: high) {
  .btn-high-contrast {
    @apply border-2 border-current;
  }
}

/* Reduced motion preferences */
@media (prefers-reduced-motion: reduce) {
  .btn-motion-safe {
    @apply transition-none;
  }
  
  .btn-motion-safe * {
    @apply animate-none;
  }
}

/* ============================================================================
   BUTTON VARIANTS WITH CSS CUSTOM PROPERTIES
   ============================================================================ */

.btn-custom {
  --btn-color: theme(colors.primary.DEFAULT);
  --btn-color-hover: theme(colors.primary.600);
  --btn-text: theme(colors.primary.foreground);
  
  @apply bg-[--btn-color] text-[--btn-text] hover:bg-[--btn-color-hover];
  @apply transition-colors duration-200;
}

.btn-custom.btn-custom--secondary {
  --btn-color: theme(colors.secondary.DEFAULT);
  --btn-color-hover: theme(colors.secondary.600);
  --btn-text: theme(colors.secondary.foreground);
}

.btn-custom.btn-custom--success {
  --btn-color: theme(colors.green.500);
  --btn-color-hover: theme(colors.green.600);
  --btn-text: theme(colors.white);
}

.btn-custom.btn-custom--danger {
  --btn-color: theme(colors.red.500);
  --btn-color-hover: theme(colors.red.600);
  --btn-text: theme(colors.white);
}