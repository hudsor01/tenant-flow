exports.id=2925,exports.ids=[2925],exports.modules={24439:(a,b,c)=>{"use strict";c.d(b,{jN:()=>G,HW:()=>I,iC:()=>D,Zm:()=>F,oC:()=>J,Up:()=>L,G6:()=>K,HG:()=>E,RJ:()=>H});var d=c(3742);c(93200);var e=c(24479),f=c(67016),g=c(41258),h=c(81956),i=c(63889),j=c(77256);let k=new i.f2("phc_rSyH7L2ImIDIi4evbhKV2sozqmf5PWIZvGzFfrfuVHf",{host:"https://us.i.posthog.com",flushAt:1,flushInterval:0});async function l(a,b,c){try{k.capture({distinctId:b||"anonymous",event:a,properties:{...c,$lib:"posthog-node",$lib_version:"4.0.1",environment:"production",timestamp:new Date().toISOString()}}),await k.flush()}catch(a){console.error("Failed to track server-side event:",a)}}async function m(a,b){try{k.identify({distinctId:a,properties:{...b,$set:b}}),await k.flush()}catch(a){console.error("Failed to identify user server-side:",a)}}async function n(){await k.shutdown()}(0,j.D)([l,m,n]),(0,d.A)(l,"70b793eb31d5b1113a4b0f4a6196e23695db2b8265",null),(0,d.A)(m,"607312533d35979839dc3b424efddee0e1ca306bb6",null),(0,d.A)(n,"000b741a22d3021fbffe9333c1692878838fa1c607",null);var o=c(8875),p=c.n(o);let q={strict:{allowedTags:[],allowedAttributes:{},allowedSchemes:[],forbiddenTags:["script","object","embed","iframe","form","input","textarea"],forbiddenAttributes:["on*","javascript:","vbscript:","data:"]},basic:{allowedTags:["b","i","em","strong","p","br","span"],allowedAttributes:{"*":["class"]},allowedSchemes:[],forbiddenTags:["script","object","embed","iframe","form","input","textarea","style"],forbiddenAttributes:["on*","javascript:","vbscript:","data:","style"]},rich:{allowedTags:["h1","h2","h3","h4","h5","h6","p","br","span","div","b","i","u","em","strong","ul","ol","li","a","img","blockquote","code","pre"],allowedAttributes:{a:["href","title","target"],img:["src","alt","title","width","height"],"*":["class"]},allowedSchemes:["http","https","mailto"],forbiddenTags:["script","object","embed","iframe","form","input","textarea","style"],forbiddenAttributes:["on*","javascript:","vbscript:","data:"]}},r=[/<script[\s\S]*?>[\s\S]*?<\/script>/gi,/javascript:/gi,/vbscript:/gi,/on\w+\s*=/gi,/data:text\/html/gi,/data:text\/javascript/gi,/data:application\/javascript/gi,/expression\s*\(/gi,/behaviour\s*:/gi,/-moz-binding\s*:/gi,/<iframe[\s\S]*?>/gi,/<object[\s\S]*?>/gi,/<embed[\s\S]*?>/gi,/<form[\s\S]*?>/gi,/<input[\s\S]*?>/gi,/<textarea[\s\S]*?>/gi,/<svg[\s\S]*?on\w+[\s\S]*?>/gi,/<meta[\s\S]*?http-equiv[\s\S]*?refresh/gi],s=[/(\b(union|select|insert|update|delete|drop|create|alter|exec|execute)\b)/gi,/(\b(or|and)\b\s+\d+\s*=\s*\d+)/gi,/(['"])\s*;\s*(drop|delete|insert|update)/gi,/(\bor\b\s+['"]?\d+['"]?\s*=\s*['"]?\d+['"]?)/gi,/(\/\*[\s\S]*?\*\/)/gi,/(--\s*[\r\n])/gi],t=[/\.\.[\\/]/g,/~[\\/]/g,/\%2e\%2e[\\/]/gi,/\%252e\%252e[\\/]/gi],u=[/[;&|`$()]/g,/\b(cat|ls|pwd|id|whoami|uname|wget|curl|nc|netcat)\b/gi];function v(a){return"string"!=typeof a?"":a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")}function w(a,b={}){let{type:c="text",maxLength:d=1e4,allowEmpty:e=!1,htmlProfile:f="basic",strict:g=!1}=b,h=[],i=[],j="";if("string"!=typeof a)if(null==a)return e||h.push("Input is required"),{valid:e,sanitized:"",errors:h,warnings:i};else a=String(a);let k=a;if(k.length>d)return h.push(`Input exceeds maximum length of ${d} characters`),{valid:!1,sanitized:"",errors:h,warnings:i};if(!e&&0===k.trim().length)return h.push("Input cannot be empty"),{valid:!1,sanitized:"",errors:h,warnings:i};let l=function(a){if("string"!=typeof a)return{isXSS:!1,patterns:[],severity:"low"};let b=[];for(let c of r)a.match(c)&&b.push(c.source);let c=b.length>2?"high":b.length>0?"medium":"low";return{isXSS:b.length>0,patterns:b,severity:c}}(k),m=function(a){if("string"!=typeof a)return{isSQLI:!1,patterns:[],severity:"low"};let b=[];for(let c of s)a.match(c)&&b.push(c.source);let c=b.length>2?"high":b.length>0?"medium":"low";return{isSQLI:b.length>0,patterns:b,severity:c}}(k),n="string"==typeof k&&t.some(a=>a.test(k)),o="string"==typeof k&&u.some(a=>a.test(k));switch(g?(l.isXSS&&h.push("Potential XSS content detected"),m.isSQLI&&h.push("Potential SQL injection detected"),n&&h.push("Path traversal attempt detected"),o&&h.push("Command injection attempt detected")):(l.isXSS&&"high"===l.severity&&i.push("Potentially malicious content was sanitized"),m.isSQLI&&i.push("SQL-like patterns were detected and sanitized")),c){case"html":j=function(a,b="basic"){if("string"!=typeof a||!a.trim())return"";let c=q[b],d={ALLOWED_TAGS:c.allowedTags,ALLOWED_ATTR:Object.keys(c.allowedAttributes).reduce((a,b)=>[...a,...c.allowedAttributes[b]],[]),ALLOWED_URI_REGEXP:c.allowedSchemes.length>0?RegExp(`^(?:${c.allowedSchemes.join("|")}):`,"i"):/^$/,FORBID_TAGS:c.forbiddenTags,FORBID_ATTR:c.forbiddenAttributes,ALLOW_DATA_ATTR:!1,ALLOW_UNKNOWN_PROTOCOLS:!1,SANITIZE_DOM:!0,KEEP_CONTENT:!0};return p().sanitize(a,d)}(k,f);break;case"url":j=function(a){if("string"!=typeof a||!a.trim())return"";let b=a.trim();if(/^(javascript|vbscript|data|file|ftp):/i.test(b))return"";let c=/^[\/\.\w-]/.test(b);return/^(https?|mailto):/i.test(b)||c?encodeURI(decodeURI(b)):""}(k);break;case"email":j=v(k.toLowerCase().trim());break;case"phone":j=k.replace(/[^\d\s\-\(\)\+]/g,"");break;case"number":j=k.replace(/[^\d\.\-]/g,"");break;default:j=v(k)}return{valid:0===h.length,sanitized:j,errors:h,warnings:i}}g.Ik({name:g.Yj().min(1,"Property name is required").max(100),address:g.Yj().min(1,"Address is required").max(200),city:g.Yj().min(1,"City is required").max(100),state:g.Yj().min(2,"State is required").max(2),zipCode:g.Yj().min(5,"ZIP code is required").max(10),propertyType:g.k5(["SINGLE_FAMILY","APARTMENT","CONDO","TOWNHOUSE","OTHER"]),description:g.Yj().optional()}),g.Ik({firstName:g.Yj().min(1,"First name is required").max(50),lastName:g.Yj().min(1,"Last name is required").max(50),email:g.Yj().email("Valid email is required"),phone:g.Yj().min(10,"Phone number is required"),dateOfBirth:g.p6().optional(),emergencyContact:g.Ik({name:g.Yj().optional(),phone:g.Yj().optional()}).optional()}),g.Ik({tenantId:g.Yj().uuid("Valid tenant ID is required"),propertyId:g.Yj().uuid("Valid property ID is required"),unitId:g.Yj().uuid().optional(),startDate:g.p6(),endDate:g.p6(),monthlyRent:g.ai().positive("Monthly rent must be positive"),securityDeposit:g.ai().nonnegative("Security deposit cannot be negative"),leaseTerms:g.Yj().optional()});let x={requiredString:a=>g.Yj().min(1,`${a} is required`),optionalString:g.Yj().optional(),name:g.Yj().min(1,"Name is required").max(100,"Name must be less than 100 characters").transform(a=>v(a)).refine(a=>w(a,{type:"text",strict:!0}).valid,"Name contains invalid characters"),title:g.Yj().min(1,"Title is required").max(100,"Title must be less than 100 characters"),description:g.Yj().min(10,"Please provide a detailed description").max(1e3,"Description must be less than 1000 characters").transform(a=>v(a)).refine(a=>w(a,{type:"text",strict:!0}).valid,"Description contains invalid or potentially dangerous content"),email:g.Yj().min(1,"Email is required").email("Please enter a valid email address").transform(a=>a.toLowerCase().trim()).refine(a=>w(a,{type:"email",strict:!0}).valid,"Email contains invalid characters"),phone:g.Yj().min(1,"Phone number is required").regex(/^\+?[\d\s\-()]+$/,"Please enter a valid phone number"),address:g.Yj().min(1,"Address is required"),city:g.Yj().min(1,"City is required"),state:g.Yj().min(1,"State is required"),zipCode:g.Yj().min(1,"ZIP code is required").regex(/^\d{5}(-\d{4})?$/,"Please enter a valid ZIP code"),positiveNumber:g.ai().min(0,"Must be a positive number"),currency:g.ai().min(0,"Amount must be positive"),percentage:g.ai().min(0).max(100,"Percentage must be between 0 and 100"),propertyType:g.k5(["SINGLE_FAMILY","MULTI_FAMILY","APARTMENT","COMMERCIAL","OTHER"]),unitNumber:g.Yj().min(1,"Unit number is required").max(20,"Unit number must be less than 20 characters"),bedrooms:g.ai().min(0).max(10),bathrooms:g.ai().min(0).max(10),squareFeet:g.ai().min(100).max(1e4).optional(),rent:g.ai().min(0).max(1e5),unitStatus:g.k5(["VACANT","OCCUPIED","MAINTENANCE","UNAVAILABLE"]),maintenancePriority:g.k5(["LOW","MEDIUM","HIGH","URGENT"]),maintenanceCategory:g.k5(["PLUMBING","ELECTRICAL","HVAC","APPLIANCE","GENERAL","EMERGENCY"]),date:g.p6(),optionalDate:g.p6().optional(),file:g.Nl(File).optional().refine(async a=>{if(!a)return!0;let{validateFile:b}=await c.e(6502).then(c.bind(c,46502));return(await b(a,"documents")).valid},"File failed security validation")},y=a=>g.Ik(a);y({name:x.name,description:x.description,address:x.address,city:x.city,state:x.state,zipCode:x.zipCode,propertyType:x.propertyType,numberOfUnits:x.positiveNumber}),y({unitNumber:x.unitNumber,propertyId:x.requiredString("Property ID"),bedrooms:x.bedrooms,bathrooms:x.bathrooms,squareFeet:x.squareFeet,rent:x.rent,status:x.unitStatus}),y({unitId:x.requiredString("Unit"),title:x.title,description:x.description,category:x.maintenanceCategory,priority:x.maintenancePriority}),y({name:x.name,email:x.email,phone:x.phone,emergencyContactName:x.name,emergencyContactPhone:x.phone}),y({amount:x.currency,dueDate:x.date,description:x.description}),y({tenantId:x.requiredString("Tenant"),unitId:x.requiredString("Unit"),startDate:x.date,endDate:x.date,monthlyRent:x.currency,securityDeposit:x.currency,terms:x.description}),y({email:x.email,password:g.Yj().min(1,"Password is required")}),y({email:x.email,password:g.Yj().min(8,"Password must be at least 8 characters"),confirmPassword:g.Yj().min(1,"Please confirm your password"),firstName:x.name,lastName:x.name}).refine(a=>a.password===a.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]}),y({firstName:x.name,lastName:x.name,phone:x.phone.optional(),address:x.address.optional(),city:x.city.optional(),state:x.state.optional(),zipCode:x.zipCode.optional()});let z=g.Ik({email:x.email,password:g.Yj().min(6,"Password must be at least 6 characters")}),A=g.Ik({email:x.email,password:g.Yj().min(8,"Password must be at least 8 characters"),confirmPassword:g.Yj().min(8,"Password must be at least 8 characters"),fullName:x.name,companyName:x.optionalString}).refine(a=>a.password===a.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]}),B=g.Ik({email:x.email}),C=g.Ik({password:g.Yj().min(8,"Password must be at least 8 characters"),confirmPassword:g.Yj().min(8,"Password must be at least 8 characters")}).refine(a=>a.password===a.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]});async function D(a,b){let c={email:b.get("email"),password:b.get("password")},d=z.safeParse(c);if(!d.success)return{errors:d.error.flatten().fieldErrors};try{let{data:a,error:b}=await h.j2.signInWithPassword({email:d.data.email,password:d.data.password});if(b)return await l("user_login_failed",void 0,{error_message:b.message,email_domain:d.data.email.split("@")[1],method:"email"}),{errors:{_form:[b.message]}};a.user&&await l("user_signed_in",a.user.id,{method:"email",email:a.user.email,user_id:a.user.id,session_id:a.session?.access_token?.slice(-8)}),(0,e.revalidateTag)("user"),(0,e.revalidateTag)("session"),(0,f.redirect)("/dashboard")}catch(a){return{errors:{_form:[a instanceof Error?a.message:"Login failed"]}}}}async function E(a,b){let c={email:b.get("email"),password:b.get("password"),confirmPassword:b.get("confirmPassword"),fullName:b.get("fullName"),companyName:b.get("companyName")},d=A.safeParse(c);if(!d.success)return{errors:d.error.flatten().fieldErrors};try{let{data:a,error:b}=await h.j2.signUp({email:d.data.email,password:d.data.password,options:{data:{full_name:d.data.fullName,company_name:d.data.companyName}}});if(b)return await l("user_signup_failed",void 0,{error_message:b.message,email_domain:d.data.email.split("@")[1],has_company_name:!!d.data.companyName}),{errors:{_form:[b.message]}};return a.user&&await l("user_signed_up",a.user.id,{method:"email",email:a.user.email,user_id:a.user.id,has_company_name:!!d.data.companyName,full_name:d.data.fullName,needs_email_verification:!a.user.email_confirmed_at}),{success:!0,message:"Account created! Please check your email to verify your account."}}catch(a){return{errors:{_form:[a instanceof Error?a.message:"Signup failed"]}}}}async function F(){try{let{data:{user:a}}=await h.ND.auth.getUser();await h.j2.signOut(),a&&await l("user_signed_out",a.id,{user_id:a.id,email:a.email,logout_method:"manual"}),(0,e.revalidateTag)("user"),(0,e.revalidateTag)("session"),(0,e.revalidateTag)("properties"),(0,e.revalidateTag)("tenants"),(0,e.revalidateTag)("leases"),(0,e.revalidateTag)("maintenance"),(0,f.redirect)("/")}catch(b){let a=b instanceof Error?b.message:"Unknown error";return console.error("Logout error:",a),{errors:{_form:[a]}}}}async function G(a,b){let c={email:b.get("email")},d=B.safeParse(c);if(!d.success)return{errors:d.error.flatten().fieldErrors};try{let{error:a}=await h.j2.resetPasswordForEmail(d.data.email,{redirectTo:`${process.env.NEXT_PUBLIC_SITE_URL}/auth/update-password`});if(a)return{errors:{_form:[a.message]}};return{success:!0,message:"Password reset email sent! Check your inbox for instructions."}}catch(a){return{errors:{_form:[a instanceof Error?a.message:"Failed to send reset email"]}}}}async function H(a,b){let c={password:b.get("password"),confirmPassword:b.get("confirmPassword")},d=C.safeParse(c);if(!d.success)return{errors:d.error.flatten().fieldErrors};try{let{error:a}=await h.j2.updateUser({password:d.data.password});if(a)return{errors:{_form:[a.message]}};return(0,e.revalidateTag)("user"),{success:!0,message:"Password updated successfully!"}}catch(a){return{errors:{_form:[a instanceof Error?a.message:"Failed to update password"]}}}}async function I(){try{let{data:{user:a}}=await h.ND.auth.getUser();if(!a)return null;return{id:a.id,email:a.email,name:a.user_metadata?.full_name||a.email,avatar_url:a.user_metadata?.avatar_url}}catch(a){return console.error("Get current user error:",a),null}}async function J(){let a=await I();return a||(0,f.redirect)("/login"),a}async function K(){let a=process.env.NEXT_PUBLIC_SITE_URL||"https://tenantflow.app",b=`${a}/auth/callback`;console.log("[OAuth Debug] Initiating Google sign-in with redirect to:",b);let{data:c,error:d}=await h.j2.signInWithOAuth({provider:"google",options:{redirectTo:b,queryParams:{access_type:"offline",prompt:"consent"}}});if(d)throw console.error("[OAuth Error] Google sign-in failed:",d),await l("user_oauth_failed",void 0,{provider:"google",error_message:d.message,method:"oauth"}),Error("Unable to sign in with Google. Please try again or contact support if the issue persists.");if(await l("user_oauth_initiated",void 0,{provider:"google",method:"oauth",redirect_url:c.url}),c.url)console.log("[OAuth Debug] Redirecting to Google OAuth URL:",c.url),(0,f.redirect)(c.url);else throw console.error("[OAuth Error] No redirect URL received from Supabase"),Error("Authentication service temporarily unavailable. Please try again in a few moments.")}async function L(){let a=process.env.NEXT_PUBLIC_SITE_URL||"https://tenantflow.app",b=`${a}/auth/callback`;console.log("[OAuth Debug] Initiating GitHub sign-in with redirect to:",b);let{data:c,error:d}=await h.j2.signInWithOAuth({provider:"github",options:{redirectTo:b}});if(d)throw console.error("[OAuth Error] GitHub sign-in failed:",d),await l("user_oauth_failed",void 0,{provider:"github",error_message:d.message,method:"oauth"}),Error("Unable to sign in with GitHub. Please try again or contact support if the issue persists.");if(await l("user_oauth_initiated",void 0,{provider:"github",method:"oauth",redirect_url:c.url}),c.url)console.log("[OAuth Debug] Redirecting to GitHub OAuth URL:",c.url),(0,f.redirect)(c.url);else throw console.error("[OAuth Error] No redirect URL received from Supabase"),Error("Authentication service temporarily unavailable. Please try again in a few moments.")}(0,j.D)([D,E,F,G,H,I,J,K,L]),(0,d.A)(D,"60e4b29a88cab62dd73500a9569735490312b9001a",null),(0,d.A)(E,"60bf5fb209eabb381d3465c437d7401bf5e7a9f829",null),(0,d.A)(F,"002ef5f9e6d0a68628a740a769ca8369cccd8f8cb6",null),(0,d.A)(G,"602dfc4bad3f8895d90122c3f093fd3fd2dd412239",null),(0,d.A)(H,"601ad9435bde691e8615c09ea76c68774781a5df3f",null),(0,d.A)(I,"003f387255f2d46c82299d96ccf50c73df598a589f",null),(0,d.A)(J,"0042491dc4c1366d056d39f9939e50a9c8e61f5f7d",null),(0,d.A)(K,"0039403314be89ddb8662fb399582d817b7b15445c",null),(0,d.A)(L,"005ebea06dc48565ac5320ce3e767292e4a0470247",null)},36875:a=>{function b(a){var b=Error("Cannot find module '"+a+"'");throw b.code="MODULE_NOT_FOUND",b}b.keys=()=>[],b.resolve=b,b.id=36875,a.exports=b},67808:(a,b,c)=>{"use strict";c.d(b,{$:()=>d});let d={api:{baseURL:"https://api.tenantflow.app/api/v1",timeout:3e4},supabase:{url:"https://bshjmbshupiibfiewpxb.supabase.co",anonKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJzaGptYnNodXBpaWJmaWV3cHhiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDg0MDc1MDYsImV4cCI6MjA2Mzk4MzUwNn0.K9cR4SN_MtutRWPJsymtAtlHpEJFyfnQgtu8BjQRqko"},stripe:{publishableKey:"pk_live_51Rd0qyP3WCR53SdoTX2cuAbujIY3WaQSSpu1esdawYD3m96SLWyRRavIZpJkh9BDNdIr8DwYluWVoMQCMqLRUf6Y00jWRkMx8j"},analytics:{posthogKey:"phc_rSyH7L2ImIDIi4evbhKV2sozqmf5PWIZvGzFfrfuVHf",posthogHost:"https://us.i.posthog.com"},app:{env:"production",version:"1.0.0",name:"TenantFlow"},features:{analytics:!0,errorReporting:!0}}},81956:(a,b,c)=>{"use strict";c.d(b,{Ht:()=>h,ND:()=>f,j2:()=>g});var d=c(20906),e=c(67808);let f=(0,d.UU)(e.$.supabase.url,e.$.supabase.anonKey,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"pkce"}}),g=f.auth;async function h(){let{data:{session:a},error:b}=await f.auth.getSession();return{session:a,error:b}}}};