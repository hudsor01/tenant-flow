exports.id=6299,exports.ids=[6299],exports.modules={605:(a,b,c)=>{"use strict";c.d(b,{Bh:()=>h,Ht:()=>g,ND:()=>f});var d=c(21608),e=c(5337);let f=(0,d.UU)(e.$.supabase.url,e.$.supabase.anonKey,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"pkce"}});async function g(){let{data:{session:a},error:b}=await f.auth.getSession();return{session:a,error:b}}function h(a){return f.auth.onAuthStateChange(a)}f.auth},1958:(a,b,c)=>{"use strict";c.d(b,{BK:()=>h,eu:()=>g,q5:()=>i});var d=c(13486);c(60159);var e=c(46267),f=c(26518);function g({className:a,...b}){return(0,d.jsx)(e.bL,{"data-slot":"avatar",className:(0,f.cn)("relative flex size-8 shrink-0 overflow-hidden rounded-full",a),...b})}function h({className:a,...b}){return(0,d.jsx)(e._V,{"data-slot":"avatar-image",className:(0,f.cn)("aspect-square size-full",a),...b})}function i({className:a,...b}){return(0,d.jsx)(e.H4,{"data-slot":"avatar-fallback",className:(0,f.cn)("bg-muted flex size-full items-center justify-center rounded-full",a),...b})}},5337:(a,b,c)=>{"use strict";c.d(b,{$:()=>d});let d={api:{baseURL:"https://api.tenantflow.app/api/v1",timeout:3e4},supabase:{url:"https://bshjmbshupiibfiewpxb.supabase.co",anonKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJzaGptYnNodXBpaWJmaWV3cHhiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDg0MDc1MDYsImV4cCI6MjA2Mzk4MzUwNn0.K9cR4SN_MtutRWPJsymtAtlHpEJFyfnQgtu8BjQRqko"},stripe:{publishableKey:"pk_live_51Rd0qyP3WCR53SdoTX2cuAbujIY3WaQSSpu1esdawYD3m96SLWyRRavIZpJkh9BDNdIr8DwYluWVoMQCMqLRUf6Y00jWRkMx8j"},analytics:{posthogKey:"phc_rSyH7L2ImIDIi4evbhKV2sozqmf5PWIZvGzFfrfuVHf",posthogHost:"https://us.i.posthog.com"},app:{env:"production",version:"1.0.0",name:"TenantFlow"},features:{analytics:!0,errorReporting:!0}}},8390:a=>{function b(a){var b=Error("Cannot find module '"+a+"'");throw b.code="MODULE_NOT_FOUND",b}b.keys=()=>[],b.resolve=b,b.id=8390,a.exports=b},13448:(a,b,c)=>{"use strict";c.d(b,{SQ:()=>i,_2:()=>j,lp:()=>k,mB:()=>l,rI:()=>g,ty:()=>h});var d=c(13486);c(60159);var e=c(7503),f=c(26518);function g({...a}){return(0,d.jsx)(e.bL,{"data-slot":"dropdown-menu",...a})}function h({...a}){return(0,d.jsx)(e.l9,{"data-slot":"dropdown-menu-trigger",...a})}function i({className:a,sideOffset:b=4,...c}){return(0,d.jsx)(e.ZL,{children:(0,d.jsx)(e.UC,{"data-slot":"dropdown-menu-content",sideOffset:b,className:(0,f.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",a),...c})})}function j({className:a,inset:b,variant:c="default",...g}){return(0,d.jsx)(e.q7,{"data-slot":"dropdown-menu-item","data-inset":b,"data-variant":c,className:(0,f.cn)("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",a),...g})}function k({className:a,inset:b,...c}){return(0,d.jsx)(e.JU,{"data-slot":"dropdown-menu-label","data-inset":b,className:(0,f.cn)("px-2 py-1.5 text-sm font-medium data-[inset]:pl-8",a),...c})}function l({className:a,...b}){return(0,d.jsx)(e.wv,{"data-slot":"dropdown-menu-separator",className:(0,f.cn)("bg-border -mx-1 my-1 h-px",a),...b})}},43521:(a,b,c)=>{"use strict";c.d(b,{Se:()=>f,p9:()=>e,yN:()=>i});var d=c(49654);let e=(0,d.eU)(null);(0,d.eU)(a=>null!==a(e));let f=(0,d.eU)(!0),g=(0,d.eU)(null),h=(0,d.eU)(Date.now());(0,d.eU)(a=>{let b=a(e);return{id:b?.organizationId||null,name:b?.organizationId||null}});let i=(0,d.eU)(null);(0,d.eU)(a=>{let b=a(e),c=a(h),d=a(g),f=Date.now();return!!b&&(!d||!(f>d))&&!(f-c>18e5)}),(0,d.eU)(a=>a(e)?.role||null),(0,d.eU)(a=>!!a(e)?.stripeCustomerId),(0,d.eU)(a=>{let b=a(e);if(!b)return[];switch(b.role){case"OWNER":return["read","write","delete","admin"];case"MANAGER":return["read","write","delete"];default:return["read"]}}),(0,d.eU)(a=>{let b=a(e);return b&&b.stripeCustomerId?"active":"inactive"}),(0,d.eU)(null,(a,b,c)=>{b(e,c),b(h,Date.now()),b(i,null),b(f,!1)}),(0,d.eU)(null,(a,b,c)=>{let d=a(e);d&&(b(e,{...d,...c}),b(h,Date.now()))}),(0,d.eU)(null,(a,b)=>{b(e,null),b(g,null),b(i,null),b(f,!1)}),(0,d.eU)(null,(a,b)=>{b(h,Date.now())})},64075:(a,b,c)=>{"use strict";c.d(b,{u:()=>h});var d=c(93153),e=c(5337),f=c(605);class g{constructor(){this.client=d.A.create({baseURL:e.$.api.baseURL,timeout:e.$.api.timeout||3e4,headers:{"Content-Type":"application/json",Accept:"application/json"},withCredentials:!0,validateStatus:a=>a<500}),this.setupInterceptors()}setupInterceptors(){this.client.interceptors.request.use(async a=>{try{let{session:b}=await (0,f.Ht)();b?.access_token&&(a.headers.Authorization=`Bearer ${b.access_token}`)}catch(a){console.warn("[API] Failed to add authentication:",a)}return a},a=>a instanceof Error?Promise.reject(a):Promise.reject(Error("string"==typeof a?a:JSON.stringify(a)))),this.client.interceptors.response.use(a=>a,async a=>(a.response?.status===401&&(console.warn("[API] Authentication error - redirecting to login"),window.location.href="/login"),Promise.reject(a)))}async makeRequest(a,b,c,d){try{let e=new AbortController,f=await this.client.request({method:a,url:b,data:c,...d,signal:d?.signal||e.signal});return{data:f.data,success:f.status>=200&&f.status<300,message:f.data?.message,timestamp:new Date().toISOString()}}catch(b){let a=b.response?.data;throw{message:a?.message||b.message||"Request failed",code:a?.code||b.code,details:a?.details||a,timestamp:new Date().toISOString()}}}async get(a,b){return this.makeRequest("GET",a,void 0,b)}async post(a,b,c){return this.makeRequest("POST",a,b,c)}async put(a,b,c){return this.makeRequest("PUT",a,b,c)}async patch(a,b,c){return this.makeRequest("PATCH",a,b,c)}async delete(a,b){return this.makeRequest("DELETE",a,void 0,b)}async healthCheck(){return this.get("/health")}createCancellableRequest(){let a=new AbortController;return{signal:a.signal,cancel:()=>a.abort()}}}let h=new g},90314:(a,b,c)=>{"use strict";c.d(b,{A:()=>k,y:()=>l});var d=c(60159),e=c(36114),f=c(81604),g=c(605),h=c(64075);class i{static async login(a){let{data:b,error:c}=await g.ND.auth.signInWithPassword({email:a.email,password:a.password});if(c)throw{message:c.message,code:c.message};if(!b.session||!b.user)throw{message:"Login failed - no session created"};try{let a=await this.syncWithBackend();return{access_token:b.session.access_token,refresh_token:b.session.refresh_token,expires_in:b.session.expires_in||3600,user:a}}catch(a){return console.warn("Backend sync failed during login:",a),{access_token:b.session.access_token,refresh_token:b.session.refresh_token,expires_in:b.session.expires_in||3600,user:this.mapSupabaseUser(b.user)}}}static async signup(a){let{data:b,error:c}=await g.ND.auth.signUp({email:a.email,password:a.password,options:{data:{name:a.name,full_name:a.name}}});if(c)throw{message:c.message,code:c.message};if(!b.user)throw{message:"Signup failed - user not created"};return{message:"Account created successfully. Please check your email to verify your account."}}static async logout(){let{error:a}=await g.ND.auth.signOut();a&&console.warn("Logout error:",a)}static async getCurrentSession(){let{data:{session:a}}=await g.ND.auth.getSession();if(!a)return null;try{let b=await this.syncWithBackend();return{access_token:a.access_token,refresh_token:a.refresh_token,expires_in:a.expires_in||3600,user:b}}catch(a){return console.warn("Failed to sync with backend:",a),null}}static async refreshSession(){let{data:a,error:b}=await g.ND.auth.refreshSession();if(b||!a.session)return null;try{let b=await this.syncWithBackend();return{access_token:a.session.access_token,refresh_token:a.session.refresh_token,expires_in:a.session.expires_in||3600,user:b}}catch(a){return console.warn("Failed to sync with backend during refresh:",a),null}}static async syncWithBackend(){try{let a=await h.u.get("/auth/me");if(a.data&&"object"==typeof a.data&&"user"in a.data&&a.data.user)return a.data.user;return a.data}catch(a){throw console.error("Backend sync failed:",a),a}}static mapSupabaseUser(a){return{id:a.id,email:a.email,name:a.user_metadata?.name||a.user_metadata?.full_name,avatarUrl:a.user_metadata?.avatar_url,role:"OWNER",emailVerified:!!a.email_confirmed_at,createdAt:a.created_at,updatedAt:a.updated_at,supabaseId:a.id,phone:null,bio:null,stripeCustomerId:null,organizationId:null}}static async resetPassword(a){let{error:b}=await g.ND.auth.resetPasswordForEmail(a,{redirectTo:`${window.location.origin}/auth/reset-password`});if(b)throw{message:b.message,code:b.message};return{message:"Password reset email sent. Please check your inbox."}}static async updatePassword(a){let{error:b}=await g.ND.auth.updateUser({password:a});if(b)throw{message:b.message,code:b.message};return{message:"Password updated successfully."}}}var j=c(43521);function k(){let[a,b]=(0,e.fp)(j.p9),[c,g]=(0,e.fp)(j.Se),[h,k]=(0,e.fp)(j.yN),l=(0,d.useCallback)(async a=>{try{g(!0),k(null);let c=await i.login(a);return b(c.user),f.oR.success("Welcome back!"),{success:!0}}catch(b){let a={type:"AUTH_ERROR",message:b instanceof Error?b.message:"Login failed",code:b instanceof Error&&"code"in b?b.code:"AUTH_ERROR"};return k(a),f.oR.error(a.message),{success:!1,error:a}}finally{g(!1)}},[b,g,k]),m=(0,d.useCallback)(async a=>{try{g(!0),k(null);let b=await i.signup(a);return f.oR.success(b.message),{success:!0,message:b.message}}catch(b){let a={type:"AUTH_ERROR",message:b instanceof Error?b.message:"Signup failed",code:b instanceof Error&&"code"in b?b.code:"AUTH_ERROR"};return k(a),f.oR.error(a.message),{success:!1,error:a}}finally{g(!1)}},[g,k]);return{user:a,loading:c,error:h,isAuthenticated:!!a,login:l,signup:m,logout:(0,d.useCallback)(async()=>{try{g(!0),await i.logout(),b(null),k(null),f.oR.success("Logged out successfully")}catch(a){console.error("Logout error:",a),b(null),k(null)}finally{g(!1)}},[b,g,k]),resetPassword:(0,d.useCallback)(async a=>{try{g(!0),k(null);let b=await i.resetPassword(a);return f.oR.success(b.message),{success:!0,message:b.message}}catch(b){let a={type:"AUTH_ERROR",message:b instanceof Error?b.message:"Password reset failed",code:b instanceof Error&&"code"in b?b.code:"AUTH_ERROR"};return k(a),f.oR.error(a.message),{success:!1,error:a}}finally{g(!1)}},[g,k])}}let l=()=>{let{user:a,loading:b,error:c}=k();return{data:a,isLoading:b,error:c}}}};