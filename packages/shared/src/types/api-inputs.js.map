{"version":3,"file":"api-inputs.js","sourceRoot":"","sources":["api-inputs.ts"],"names":[],"mappings":"","sourcesContent":["/**\n * API Request Input Types\n * All input types for API requests across the application\n * These types define the structure of data sent to backend endpoints\n */\n\nimport type { PLAN_TYPE } from '../constants/billing.js'\nimport type { MaintenanceQuery, PropertyQuery } from './queries.js'\nimport type { Database } from './supabase-generated.js'\n\n// Define types properly from Database schema\ntype Lease = Database['public']['Tables']['lease']['Row']\ntype Property = Database['public']['Tables']['property']['Row']\n\n// Subscription API Inputs\n\n/**\n * Input for creating a checkout session\n * Used by useCreateCheckoutSession hook from use-billing\n */\nexport interface CreateCheckoutInput {\n\tplanType?: string\n\tplanId?: string // Backend expects either planId or planType\n\tpriceId?: string // Alternative to planId\n\tinterval?: 'monthly' | 'annual' // Backend field name\n\tbillingInterval?: 'monthly' | 'yearly' // Frontend compatibility\n\tuiMode?: 'hosted' | 'embedded'\n\tsuccessUrl?: string\n\tcancelUrl?: string\n}\n\n/**\n * Input for creating a customer portal session\n * Used by useCreatePortalSession hook from use-billing\n */\nexport interface CreatePortalInput {\n\treturnUrl?: string\n}\n\n/**\n * Parameters for direct subscription creation (without checkout)\n * Used by useDirectSubscription hook\n */\nexport interface DirectSubscriptionParams {\n\tpriceId: string\n\tplanType: keyof typeof PLAN_TYPE\n\tbillingName?: string\n\tpaymentMethodId?: string\n\tdefaultPaymentMethod?: boolean\n}\n\n/**\n * Parameters for updating an existing subscription\n * Used by useDirectSubscription hook for plan changes\n */\nexport interface SubscriptionUpdateParams {\n\tsubscriptionId: string\n\tnewPriceId: string\n\tprorationBehavior?: 'create_prorations' | 'none' | 'always_invoice'\n\tcoupon?: string\n\tmetadata?: Record<string, string> // Stripe metadata is always string values\n\tdescription?: string\n\ttrialEnd?: number | 'now'\n}\n\n/**\n * Checkout parameters for basic checkout flow\n * Used by useCreateCheckout hook from use-billing\n */\nexport interface CheckoutParams {\n\tplanType: keyof typeof PLAN_TYPE\n\tbillingInterval: 'monthly' | 'annual'\n\tbillingName?: string\n}\n\n/**\n * Trial activation parameters\n * Used by useStartFreeTrial hook from use-billing\n */\nexport interface TrialParams {\n\tonSuccess?: (subscriptionId: string) => void\n}\n\n// Property API Inputs (Re-exported from properties.ts)\n\n// Define property input types from Database schema\nexport type CreatePropertyInput =\n\tDatabase['public']['Tables']['property']['Insert']\nexport type UpdatePropertyInput =\n\tDatabase['public']['Tables']['property']['Update']\n\n/**\n * Query parameters for filtering properties (extends from queries.ts)\n * Used by property listing hooks\n */\nexport type PropertyQueryInput = PropertyQuery\n\n// Unit API Inputs\n\n/**\n * Input for creating a new unit\n * Uses Supabase generated types for type safety\n */\nexport type CreateUnitInput = Database['public']['Tables']['unit']['Insert']\n\n/**\n * Input for updating an existing unit\n * Uses Supabase generated types for type safety\n */\nexport type UpdateUnitInput = Database['public']['Tables']['unit']['Update']\n\n// Tenant API Inputs\n\n/**\n * Input for creating a new tenant\n * Excludes server-managed fields: userId (from auth), id, createdAt, updatedAt\n * Backend extracts userId from authenticated JWT token\n */\nexport type CreateTenantInput = Omit<\n\tDatabase['public']['Tables']['tenant']['Insert'],\n\t'userId' | 'id' | 'createdAt' | 'updatedAt'\n>\n\n/**\n * Input for updating an existing tenant\n * Uses Supabase generated types for type safety\n */\nexport type UpdateTenantInput = Database['public']['Tables']['tenant']['Update']\n\n// Lease API Inputs\n\n/**\n * Input for creating a new lease\n * Uses Supabase generated types for type safety\n */\nexport type CreateLeaseInput = Database['public']['Tables']['lease']['Insert']\n\n/**\n * Input for updating an existing lease\n * Uses Supabase generated types for type safety\n */\nexport type UpdateLeaseInput = Database['public']['Tables']['lease']['Update']\n\n// Maintenance API Inputs\n\n/**\n * Input for creating a maintenance request\n * Uses Supabase generated types for type safety\n */\nexport type CreateMaintenanceInput =\n\tDatabase['public']['Tables']['maintenance_request']['Insert']\n\n/**\n * Input for updating a maintenance request\n * Uses Supabase generated types for type safety\n */\nexport type UpdateMaintenanceInput =\n\tDatabase['public']['Tables']['maintenance_request']['Update']\n\n/**\n * Query parameters for maintenance request search (extends from queries.ts)\n * Used by maintenance list endpoints\n */\nexport type MaintenanceQueryInput = MaintenanceQuery\n\n// Form Data Types (moved from frontend)\n\n// PropertyFormData is now defined in validation/properties.ts as z.infer<typeof propertyFormSchema>\n// This ensures type safety and alignment with React Hook Form zodResolver\n\n/**\n * Lease form props for modal components\n */\nexport interface UseLeaseFormProps {\n\tlease?: Lease\n\tmode?: 'create' | 'edit'\n\tpropertyId?: string\n\tunitId?: string\n\ttenantId?: string\n\tonSuccess: () => void\n\tonClose: () => void\n}\n\n/**\n * Property form data props for modal components\n */\nexport interface UsePropertyFormDataProps {\n\tproperty?: Property\n\tmode: 'create' | 'edit'\n\tisOpen: boolean\n}\n\n/**\n * Form field context types for React Hook Form integration\n */\nexport interface FormFieldContextValue<\n\tTFieldValues extends Record<\n\t\tstring,\n\t\tstring | number | boolean | null\n\t> = Record<string, string | number | boolean | null>,\n\tTName extends keyof TFieldValues = keyof TFieldValues\n> {\n\tname: TName\n}\n\nexport interface FormItemContextValue {\n\tid: string\n}\n\n// File Upload Types\n\n/**\n * File upload request structure\n */\nexport interface FileUploadRequest {\n\tfile: string // base64 encoded file\n\tfilename: string\n\tcontentType: string\n\tfolder?: string\n}\n\n// Note: FileUploadResponse is defined in api.ts\n// Note: Invoice types (EmailCaptureData, InvoiceDownloadResponse, InvoiceGenerationRequest) are defined in invoice-lead.ts\n\n// Authentication API Inputs\n\n/**\n * Input for user registration\n * Used by auth registration endpoints\n */\nexport interface RegisterInput {\n\temail: string\n\tpassword: string\n\tfirstName: string\n\tlastName: string\n}\n\n/**\n * Input for user login\n * Used by auth login endpoints\n */\nexport interface LoginInput {\n\temail: string\n\tpassword: string\n}\n\n/**\n * Input for refresh token request\n * Used by auth token refresh endpoints\n */\nexport interface RefreshTokenInput {\n\trefreshToken: string\n}\n\n/**\n * Input for forgot password request\n * Used by auth forgot password endpoints\n */\nexport interface ForgotPasswordInput {\n\temail: string\n}\n\n/**\n * Input for password reset\n * Used by auth reset password endpoints\n */\nexport interface ResetPasswordInput {\n\ttoken: string\n\tpassword: string\n}\n\n/**\n * Input for changing password\n * Used by auth change password endpoints\n */\nexport interface ChangePasswordInput {\n\tcurrentPassword: string\n\tnewPassword: string\n}\n\n/**\n * Input for auth callback (OAuth)\n * Used by auth callback endpoints\n */\nexport interface AuthCallbackInput {\n\taccess_token: string\n\trefresh_token: string\n\ttype?: string\n}\n\n// User Management API Inputs\n\n/**\n * Input for ensuring user exists\n * Used by user management endpoints\n */\nexport interface EnsureUserExistsInput {\n\tauthUser: {\n\t\tid: string\n\t\temail: string\n\t\tuser_metadata?: {\n\t\t\tname?: string\n\t\t\tfull_name?: string\n\t\t}\n\t}\n\toptions?: {\n\t\trole?: 'OWNER' | 'TENANT' | 'MANAGER' | 'ADMIN'\n\t\tname?: string\n\t\tmaxRetries?: number\n\t\tretryDelayMs?: number\n\t}\n}\n\n/**\n * Input for updating user profile - Re-export from api.ts (primary source)\n */\nexport type { UpdateUserProfileInput } from './api.js'\n"]}