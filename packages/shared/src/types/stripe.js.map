{"version":3,"file":"stripe.js","sourceRoot":"","sources":["stripe.ts"],"names":[],"mappings":"","sourcesContent":["/**\n * Minimal Stripe Type Definitions\n *\n * This file contains ONLY the essential types needed by TenantFlow\n * that are not available from the official Stripe SDK.\n *\n * IMPORTANT: Always use official Stripe types directly from 'stripe' package\n * instead of creating duplicate definitions.\n */\n\n// Business Logic Types\n\n/**\n * TenantFlow plan type enumeration\n * Maps to Supabase PlanType enum\n */\nexport type PlanType = 'FREETRIAL' | 'STARTER' | 'GROWTH' | 'TENANTFLOW_MAX'\n\n/**\n * Billing period type for subscriptions\n */\nexport type BillingPeriod = 'monthly' | 'annual'\n\n/**\n * Alias for compatibility\n */\nexport type BillingInterval = BillingPeriod\n\n// Webhook Integration Types\n\n/**\n * Webhook event types that TenantFlow processes\n */\nexport type StripeWebhookEventType =\n\t| 'customer.subscription.created'\n\t| 'customer.subscription.updated'\n\t| 'customer.subscription.deleted'\n\t| 'invoice.payment_succeeded'\n\t| 'invoice.payment_failed'\n\t| 'customer.updated'\n\t| 'payment_method.attached'\n\t| 'payment_method.detached'\n\n/**\n * Webhook event interface for TenantFlow processing\n * Uses official Stripe.Event as base\n */\nexport interface StripeWebhookEvent {\n\tid: string\n\ttype: StripeWebhookEventType\n\tdata: {\n\t\tobject: unknown\n\t\tprevious_attributes?: Record<string, unknown>\n\t}\n}\n\n/**\n * Webhook notification for frontend display\n */\nexport interface WebhookNotification {\n\tid: string\n\ttype: 'success' | 'error' | 'info' | 'warning'\n\ttitle: string\n\tmessage: string\n\ttimestamp: Date\n\tmetadata?: Record<string, unknown>\n}\n\n/**\n * Webhook processor function type\n */\nexport type WebhookProcessorFunction = (\n\tevent: StripeWebhookEvent\n) => Promise<WebhookNotification[]>\n\n/**\n * Webhook processor configuration\n */\nexport interface StripeWebhookProcessor {\n\tevent: StripeWebhookEventType\n\tprocessor: WebhookProcessorFunction\n}\n\n// Native Stripe Types Usage Guide\n\n/**\n * ALWAYS use native Stripe types from the official SDK:\n *\n * [OK] CORRECT:\n * import type { Stripe } from 'stripe'\n * const paymentMethod: Stripe.PaymentMethod = ...\n * const customer: Stripe.Customer = ...\n * const subscription: Stripe.Subscription = ...\n *\n * [ERROR] DO NOT create custom type duplicates\n *\n * For database PaymentMethod table, use:\n * import type { PaymentMethod } from '@repo/shared/types/supabase'\n */\n\n// Frontend Stripe Product Types\nexport interface StripePrice {\n\tid: string\n\tunit_amount: number\n\tcurrency: string\n\trecurring: {\n\t\tinterval: 'month' | 'year'\n\t\tinterval_count: number\n\t} | null\n}\n\nexport interface StripeProductWithPricing {\n\tid: string\n\tname: string\n\tdescription: string | null\n\tmetadata: Record<string, string>\n\tprices: {\n\t\tmonthly: StripePrice | null\n\t\tannual: StripePrice | null\n\t}\n\tdefaultPrice: StripePrice | null\n}\n\n// Tenant Payment Types\n\n/**\n * Parameters for creating a Stripe Customer for a Tenant\n */\nexport interface CreateTenantCustomerParams {\n\ttenantId: string\n\temail?: string\n\tname?: string\n\tphone?: string\n\tmetadata?: Record<string, string>\n}\n\n/**\n * Parameters for attaching a payment method to a Tenant's Stripe Customer\n */\nexport interface AttachPaymentMethodParams {\n\ttenantId: string\n\tpaymentMethodId: string\n\tsetAsDefault?: boolean\n}\n\n/**\n * Parameters for setting up autopay (recurring rent subscription) for a Tenant\n */\nexport interface SetupTenantAutopayParams {\n\ttenantId: string\n\tleaseId: string\n\tpaymentMethodId?: string\n}\n\n/**\n * Parameters for canceling autopay for a Tenant\n */\nexport interface CancelTenantAutopayParams {\n\ttenantId: string\n\tleaseId: string\n}\n\n/**\n * Parameters for getting autopay status for a Tenant\n */\nexport interface GetAutopayStatusParams {\n\ttenantId: string\n\tleaseId: string\n}\n\n/**\n * Response from autopay status query\n */\nexport interface TenantAutopayStatusResponse {\n\tenabled: boolean\n\tsubscriptionId: string | null\n\tstatus: string | null\n\tnextPaymentDate: string | null\n}\n\n/**\n * Response from setting up autopay\n */\nexport interface SetupTenantAutopayResponse {\n\tsubscriptionId: string\n\tstatus: string\n}\n\n/**\n * Response from canceling autopay\n */\nexport interface CancelTenantAutopayResponse {\n\tsuccess: boolean\n}\n"]}