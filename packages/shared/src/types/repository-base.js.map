{"version":3,"file":"repository-base.js","sourceRoot":"","sources":["repository-base.ts"],"names":[],"mappings":";;;AAgCA,MAAa,eAAgB,SAAQ,KAAK;IAGf;IAF1B,YACC,OAAe,EACU,KAAa;QAEtC,KAAK,CAAC,OAAO,CAAC,CAAA;QAFW,UAAK,GAAL,KAAK,CAAQ;QAGtC,IAAI,CAAC,IAAI,GAAG,iBAAiB,CAAA;IAC9B,CAAC;CACD;AARD,0CAQC;AAED,MAAa,mBAAoB,SAAQ,eAAe;IACvD,YAAY,UAAkB,EAAE,EAAU;QACzC,KAAK,CAAC,GAAG,UAAU,YAAY,EAAE,YAAY,CAAC,CAAA;QAC9C,IAAI,CAAC,IAAI,GAAG,qBAAqB,CAAA;IAClC,CAAC;CACD;AALD,kDAKC;AAED,MAAa,oBAAqB,SAAQ,eAAe;IACxD,YAAY,UAAkB,EAAE,KAAa,EAAE,KAAa;QAC3D,KAAK,CAAC,GAAG,UAAU,SAAS,KAAK,KAAK,KAAK,kBAAkB,CAAC,CAAA;QAC9D,IAAI,CAAC,IAAI,GAAG,sBAAsB,CAAA;IACnC,CAAC;CACD;AALD,oDAKC","sourcesContent":["/**\n * Shared repository type contracts\n * Centralizes common repository interfaces and error types so both\n * backend services and utilities can rely on a single source of truth.\n */\n\n// Import pagination and filter options from core.ts to avoid duplicates\nimport type {\n\tPaginationOptions,\n\tSortOptions,\n\tBaseFilterOptions\n} from './core.js'\n\n// Re-export for convenience\nexport type { PaginationOptions, SortOptions, BaseFilterOptions }\n\nexport interface BaseRepository<\n\tEntity,\n\tCreateData,\n\tUpdateData,\n\tFilterOptions = Record<string, unknown>\n> {\n\tfindById(id: string): Promise<Entity | null>\n\tfindByUserId(userId: string, filters?: FilterOptions): Promise<Entity[]>\n\tfindAll(filters?: FilterOptions): Promise<Entity[]>\n\tcreate(userId: string, data: CreateData): Promise<Entity>\n\tupdate(id: string, data: UpdateData): Promise<Entity>\n\tdelete(id: string): Promise<void>\n\texists(id: string): Promise<boolean>\n\tcount(filters?: FilterOptions): Promise<number>\n}\n\nexport class RepositoryError extends Error {\n\tconstructor(\n\t\tmessage: string,\n\t\tpublic override readonly cause?: Error\n\t) {\n\t\tsuper(message)\n\t\tthis.name = 'RepositoryError'\n\t}\n}\n\nexport class EntityNotFoundError extends RepositoryError {\n\tconstructor(entityName: string, id: string) {\n\t\tsuper(`${entityName} with ID ${id} not found`)\n\t\tthis.name = 'EntityNotFoundError'\n\t}\n}\n\nexport class DuplicateEntityError extends RepositoryError {\n\tconstructor(entityName: string, field: string, value: string) {\n\t\tsuper(`${entityName} with ${field} '${value}' already exists`)\n\t\tthis.name = 'DuplicateEntityError'\n\t}\n}\n"]}