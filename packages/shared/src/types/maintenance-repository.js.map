{"version":3,"file":"maintenance-repository.js","sourceRoot":"","sources":["maintenance-repository.ts"],"names":[],"mappings":"","sourcesContent":["import type {\n\tMaintenanceRequest,\n\tMaintenanceStats,\n\tQueryParams\n} from './core.js'\nimport type { Database } from './supabase-generated.js'\nimport type { BaseRepository } from './repository-base.js'\n\nexport type MaintenanceRequestInput =\n\tDatabase['public']['Tables']['maintenance_request']['Insert']\nexport type MaintenanceRequestUpdate =\n\tDatabase['public']['Tables']['maintenance_request']['Update']\n\nexport interface MaintenanceQueryOptions extends QueryParams {\n\tpropertyId?: string\n\tunitId?: string\n\ttenantId?: string\n\tstatus?: string\n\tpriority?: Database['public']['Enums']['Priority']\n\tcategory?: Database['public']['Enums']['MaintenanceCategory']\n\tassignedTo?: string\n\tdateFrom?: Date\n\tdateTo?: Date\n}\n\nexport interface MaintenanceRepositoryContract\n\textends BaseRepository<\n\t\tMaintenanceRequest,\n\t\tMaintenanceRequestInput,\n\t\tMaintenanceRequestUpdate,\n\t\tMaintenanceQueryOptions\n\t> {\n\tfindByUserIdWithSearch(\n\t\tuserId: string,\n\t\toptions: MaintenanceQueryOptions\n\t): Promise<MaintenanceRequest[]>\n\tfindByPropertyId(propertyId: string): Promise<MaintenanceRequest[]>\n\tfindByUnitId(unitId: string): Promise<MaintenanceRequest[]>\n\tfindByTenantId(tenantId: string): Promise<MaintenanceRequest[]>\n\tsoftDelete(\n\t\tuserId: string,\n\t\trequestId: string\n\t): Promise<{ success: boolean; message: string }>\n\tgetStats(\n\t\tuserId: string\n\t): Promise<\n\t\tMaintenanceStats & { totalCost: number; avgResponseTimeHours: number }\n\t>\n\tgetAnalytics(\n\t\tuserId: string,\n\t\toptions: { propertyId?: string; timeframe: string }\n\t): Promise<MaintenanceRequest[]>\n\tgetOverdueRequests(userId: string): Promise<MaintenanceRequest[]>\n\tgetHighPriorityRequests(userId: string): Promise<MaintenanceRequest[]>\n\tassignRequest(\n\t\trequestId: string,\n\t\tassignedTo: string,\n\t\tassignedBy: string\n\t): Promise<MaintenanceRequest | null>\n\tupdateStatus(\n\t\trequestId: string,\n\t\tstatus: Database['public']['Enums']['RequestStatus'],\n\t\tupdatedBy: string,\n\t\tnotes?: string\n\t): Promise<MaintenanceRequest | null>\n\taddWorkLog(\n\t\trequestId: string,\n\t\tworkLog: {\n\t\t\tdescription: string\n\t\t\ttechnicianId: string\n\t\t\thoursWorked?: number\n\t\t\tcost?: number\n\t\t\tmaterials?: string\n\t\t}\n\t): Promise<MaintenanceRequest | null>\n}\n"]}