{"version":3,"file":"financial-statements.js","sourceRoot":"","sources":["financial-statements.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * Financial Statements Utilities\n *\n * Helper functions for financial statement calculations and formatting\n */\n\nimport type {\n\tBalanceSheetData,\n\tCashFlowData,\n\tFinancialPeriod,\n\tIncomeStatementData,\n\tPeriodComparison,\n\tTaxDocumentsData\n} from '../types/financial-statements.js'\n\n/**\n * Safely converts a value to a number, returning 0 for invalid values\n */\nexport function safeNumber(value: unknown): number {\n\tif (value === null || value === undefined) return 0\n\tconst num = Number(value)\n\treturn Number.isFinite(num) ? num : 0\n}\n\n/**\n * Calculates percentage change between two values\n */\nexport function calculatePercentChange(\n\tcurrent: number,\n\tprevious: number\n): number {\n\tif (previous === 0) return current === 0 ? 0 : 100\n\treturn ((current - previous) / Math.abs(previous)) * 100\n}\n\n/**\n * Calculates period comparison data\n */\nexport function calculatePeriodComparison(\n\tcurrentValue: number,\n\tpreviousValue: number\n): PeriodComparison {\n\tconst changeAmount = currentValue - previousValue\n\tconst changePercent = calculatePercentChange(currentValue, previousValue)\n\n\treturn {\n\t\tcurrentValue,\n\t\tpreviousValue,\n\t\tchangeAmount,\n\t\tchangePercent\n\t}\n}\n\n/**\n * Formats a date range into a human-readable label\n */\nexport function formatPeriodLabel(startDate: string, endDate: string): string {\n\tconst start = new Date(startDate)\n\tconst end = new Date(endDate)\n\n\tconst startMonth = start.toLocaleDateString('en-US', { month: 'short' })\n\tconst endMonth = end.toLocaleDateString('en-US', { month: 'short' })\n\tconst year = end.getFullYear()\n\n\tif (startMonth === endMonth) {\n\t\treturn `${startMonth} ${year}`\n\t}\n\n\tif (start.getFullYear() === end.getFullYear()) {\n\t\treturn `${startMonth} - ${endMonth} ${year}`\n\t}\n\n\treturn `${startMonth} ${start.getFullYear()} - ${endMonth} ${year}`\n}\n\n/**\n * Creates a financial period object\n */\nexport function createFinancialPeriod(\n\tstartDate: string,\n\tendDate: string\n): FinancialPeriod {\n\treturn {\n\t\tstartDate,\n\t\tendDate,\n\t\tlabel: formatPeriodLabel(startDate, endDate)\n\t}\n}\n\n/**\n * Validates that a balance sheet is balanced (Assets = Liabilities + Equity)\n */\nexport function validateBalanceSheet(data: BalanceSheetData): boolean {\n\tconst tolerance = 0.01 // Allow $0.01 difference due to rounding\n\tconst difference = Math.abs(\n\t\tdata.assets.totalAssets -\n\t\t\t(data.liabilities.totalLiabilities + data.equity.totalEquity)\n\t)\n\treturn difference < tolerance\n}\n\n/**\n * Calculates profit margin percentage\n */\nexport function calculateProfitMargin(\n\tnetIncome: number,\n\ttotalRevenue: number\n): number {\n\tif (totalRevenue === 0) return 0\n\treturn (netIncome / totalRevenue) * 100\n}\n\n/**\n * Maps raw RPC data to Income Statement structure\n */\nexport function mapToIncomeStatement(\n\traw: unknown\n): Partial<IncomeStatementData> {\n\tif (!raw || typeof raw !== 'object') {\n\t\treturn {}\n\t}\n\n\tconst data = raw as Record<string, unknown>\n\n\treturn {\n\t\trevenue: {\n\t\t\trentalIncome: safeNumber(data.rental_income),\n\t\t\tlateFeesIncome: safeNumber(data.late_fees_income),\n\t\t\totherIncome: safeNumber(data.other_income),\n\t\t\ttotalRevenue: safeNumber(data.total_revenue)\n\t\t},\n\t\texpenses: {\n\t\t\tpropertyManagement: safeNumber(data.property_management),\n\t\t\tmaintenance: safeNumber(data.maintenance),\n\t\t\tutilities: safeNumber(data.utilities),\n\t\t\tinsurance: safeNumber(data.insurance),\n\t\t\tpropertyTax: safeNumber(data.property_tax),\n\t\t\tmortgage: safeNumber(data.mortgage),\n\t\t\tother: safeNumber(data.other_expenses),\n\t\t\ttotalExpenses: safeNumber(data.total_expenses)\n\t\t},\n\t\tgrossProfit: safeNumber(data.gross_profit),\n\t\toperatingIncome: safeNumber(data.operating_income),\n\t\tnetIncome: safeNumber(data.net_income),\n\t\tprofitMargin: safeNumber(data.profit_margin)\n\t}\n}\n\n/**\n * Maps raw RPC data to Cash Flow Statement structure\n */\nexport function mapToCashFlow(raw: unknown): Partial<CashFlowData> {\n\tif (!raw || typeof raw !== 'object') {\n\t\treturn {}\n\t}\n\n\tconst data = raw as Record<string, unknown>\n\n\treturn {\n\t\toperatingActivities: {\n\t\t\trentalPaymentsReceived: safeNumber(data.rental_payments_received),\n\t\t\toperatingExpensesPaid: safeNumber(data.operating_expenses_paid),\n\t\t\tmaintenancePaid: safeNumber(data.maintenance_paid),\n\t\t\tnetOperatingCash: safeNumber(data.net_operating_cash)\n\t\t},\n\t\tinvestingActivities: {\n\t\t\tpropertyAcquisitions: safeNumber(data.property_acquisitions),\n\t\t\tpropertyImprovements: safeNumber(data.property_improvements),\n\t\t\tnetInvestingCash: safeNumber(data.net_investing_cash)\n\t\t},\n\t\tfinancingActivities: {\n\t\t\tmortgagePayments: safeNumber(data.mortgage_payments),\n\t\t\tloanProceeds: safeNumber(data.loan_proceeds),\n\t\t\townerContributions: safeNumber(data.owner_contributions),\n\t\t\townerDistributions: safeNumber(data.owner_distributions),\n\t\t\tnetFinancingCash: safeNumber(data.net_financing_cash)\n\t\t},\n\t\tnetCashFlow: safeNumber(data.net_cash_flow),\n\t\tbeginningCash: safeNumber(data.beginning_cash),\n\t\tendingCash: safeNumber(data.ending_cash)\n\t}\n}\n\n/**\n * Maps raw RPC data to Balance Sheet structure\n */\nexport function mapToBalanceSheet(raw: unknown): Partial<BalanceSheetData> {\n\tif (!raw || typeof raw !== 'object') {\n\t\treturn {}\n\t}\n\n\tconst data = raw as Record<string, unknown>\n\n\tconst assets = {\n\t\tcurrentAssets: {\n\t\t\tcash: safeNumber(data.cash),\n\t\t\taccountsReceivable: safeNumber(data.accounts_receivable),\n\t\t\tsecurityDeposits: safeNumber(data.security_deposits),\n\t\t\ttotal: safeNumber(data.current_assets_total)\n\t\t},\n\t\tfixedAssets: {\n\t\t\tpropertyValues: safeNumber(data.property_values),\n\t\t\taccumulatedDepreciation: safeNumber(data.accumulated_depreciation),\n\t\t\tnetPropertyValue: safeNumber(data.net_property_value),\n\t\t\ttotal: safeNumber(data.fixed_assets_total)\n\t\t},\n\t\ttotalAssets: safeNumber(data.total_assets)\n\t}\n\n\tconst liabilities = {\n\t\tcurrentLiabilities: {\n\t\t\taccountsPayable: safeNumber(data.accounts_payable),\n\t\t\tsecurityDepositLiability: safeNumber(data.security_deposit_liability),\n\t\t\taccruedExpenses: safeNumber(data.accrued_expenses),\n\t\t\ttotal: safeNumber(data.current_liabilities_total)\n\t\t},\n\t\tlongTermLiabilities: {\n\t\t\tmortgagesPayable: safeNumber(data.mortgages_payable),\n\t\t\ttotal: safeNumber(data.long_term_liabilities_total)\n\t\t},\n\t\ttotalLiabilities: safeNumber(data.total_liabilities)\n\t}\n\n\tconst equity = {\n\t\townerCapital: safeNumber(data.owner_capital),\n\t\tretainedEarnings: safeNumber(data.retained_earnings),\n\t\tcurrentPeriodIncome: safeNumber(data.current_period_income),\n\t\ttotalEquity: safeNumber(data.total_equity)\n\t}\n\n\treturn {\n\t\tassets,\n\t\tliabilities,\n\t\tequity,\n\t\tbalanceCheck:\n\t\t\tMath.abs(\n\t\t\t\tassets.totalAssets - (liabilities.totalLiabilities + equity.totalEquity)\n\t\t\t) < 0.01\n\t}\n}\n\n/**\n * Maps raw RPC data to Tax Documents structure\n */\nexport function mapToTaxDocuments(raw: unknown): Partial<TaxDocumentsData> {\n\tif (!raw || typeof raw !== 'object') {\n\t\treturn {}\n\t}\n\n\tconst data = raw as Record<string, unknown>\n\n\treturn {\n\t\ttaxYear: safeNumber(data.tax_year),\n\t\tincomeBreakdown: {\n\t\t\tgrossRentalIncome: safeNumber(data.gross_rental_income),\n\t\t\ttotalExpenses: safeNumber(data.total_expenses),\n\t\t\tnetOperatingIncome: safeNumber(data.net_operating_income),\n\t\t\tdepreciation: safeNumber(data.depreciation),\n\t\t\tmortgageInterest: safeNumber(data.mortgage_interest),\n\t\t\ttaxableIncome: safeNumber(data.taxable_income)\n\t\t},\n\t\ttotals: {\n\t\t\ttotalIncome: safeNumber(data.total_income),\n\t\t\ttotalDeductions: safeNumber(data.total_deductions),\n\t\t\tnetTaxableIncome: safeNumber(data.net_taxable_income)\n\t\t}\n\t}\n}\n\n/**\n * Formats a currency value for display\n */\nexport function formatCurrency(value: number): string {\n\treturn new Intl.NumberFormat('en-US', {\n\t\tstyle: 'currency',\n\t\tcurrency: 'USD',\n\t\tminimumFractionDigits: 2,\n\t\tmaximumFractionDigits: 2\n\t}).format(value)\n}\n\n/**\n * Formats a percentage value for display\n */\nexport function formatPercentage(value: number, decimals = 1): string {\n\treturn `${value.toFixed(decimals)}%`\n}\n"]}