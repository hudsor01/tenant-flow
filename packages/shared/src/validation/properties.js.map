{"version":3,"file":"properties.js","sourceRoot":"","sources":["properties.ts"],"names":[],"mappings":"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","sourcesContent":["import { z } from 'zod'\nimport { Constants, type Database } from '../types/supabase-generated.js'\nimport type { CreatePropertyRequest } from '../types/backend-domain.js'\nimport {\n\tnonEmptyStringSchema,\n\tnonNegativeNumberSchema,\n\tpositiveNumberSchema,\n\trequiredString,\n\turlSchema,\n\tuuidSchema\n} from './common.js'\nimport { imageUrlSchema } from './image-url.schemas.js'\nimport { VALIDATION_LIMITS } from '@repo/shared/constants/billing'\n\n// Property type schema - uses auto-generated Supabase enums\nexport const propertyTypeSchema = z.enum(\n\tConstants.public.Enums.PropertyType as readonly [string, ...string[]]\n)\n\nexport const propertyStatusSchema = z.enum(\n\tConstants.public.Enums.PropertyStatus as readonly [string, ...string[]]\n)\n\n// Base property input schema (for forms and API creation)\nexport const propertyInputSchema = z.object({\n\tname: nonEmptyStringSchema\n\t\t.min(3, 'Property name must be at least 3 characters')\n\t\t.max(VALIDATION_LIMITS.PROPERTY_NAME_MAX_LENGTH, `Property name cannot exceed ${VALIDATION_LIMITS.PROPERTY_NAME_MAX_LENGTH} characters`),\n\n\tdescription: z\n\t\t.string()\n\t\t.max(VALIDATION_LIMITS.PROPERTY_DESCRIPTION_MAX_LENGTH, `Description cannot exceed ${VALIDATION_LIMITS.PROPERTY_DESCRIPTION_MAX_LENGTH} characters`)\n\t\t.optional()\n\t\t.or(z.literal('')),\n\n\tpropertyType: propertyTypeSchema,\n\n\taddress: nonEmptyStringSchema\n\t\t.min(5, 'Address must be at least 5 characters')\n\t\t.max(200, 'Address cannot exceed 200 characters'),\n\n\tcity: nonEmptyStringSchema\n\t\t.min(2, 'City must be at least 2 characters')\n\t\t.max(50, 'City cannot exceed 50 characters'),\n\n\tstate: z\n\t\t.string()\n\t\t.min(2, 'State is required')\n\t\t.max(2, 'State must be 2 characters')\n\t\t.regex(/^[A-Z]{2}$/, 'State must be 2 uppercase letters'),\n\n\tzipCode: z\n\t\t.string()\n\t\t.regex(\n\t\t\t/^\\d{5}(-\\d{4})?$/,\n\t\t\t'Please enter a valid ZIP code (12345 or 12345-6789)'\n\t\t),\n\n\tbedrooms: positiveNumberSchema\n\t\t.int('Bedrooms must be a whole number')\n\t\t.max(VALIDATION_LIMITS.PROPERTY_UNIT_MAX_BEDROOMS, `Maximum ${VALIDATION_LIMITS.PROPERTY_UNIT_MAX_BEDROOMS} bedrooms allowed`)\n\t\t.optional(),\n\n\tbathrooms: positiveNumberSchema\n\t\t.max(VALIDATION_LIMITS.PROPERTY_UNIT_MAX_BATHROOMS, `Maximum ${VALIDATION_LIMITS.PROPERTY_UNIT_MAX_BATHROOMS} bathrooms allowed`)\n\t\t.optional(),\n\n\tsquareFootage: positiveNumberSchema\n\t\t.int('Square footage must be a whole number')\n\t\t.max(VALIDATION_LIMITS.SQUARE_FOOTAGE_MAXIMUM, 'Square footage seems unrealistic')\n\t\t.optional(),\n\n\trent: nonNegativeNumberSchema\n\t\t.max(VALIDATION_LIMITS.RENT_MAXIMUM_VALUE, 'Rent amount seems unrealistic')\n\t\t.optional(),\n\n\tdeposit: nonNegativeNumberSchema\n\t\t.max(VALIDATION_LIMITS.RENT_MAXIMUM_VALUE, 'Deposit amount seems unrealistic')\n\t\t.optional(),\n\n\timages: z.array(urlSchema).optional(),\n\n\tamenities: z.array(z.string()).optional()\n})\n\n// Full property schema (includes server-generated fields)\nexport const propertySchema = propertyInputSchema.extend({\n\tid: uuidSchema,\n\townerId: uuidSchema,\n\tstatus: propertyStatusSchema,\n\tcreatedAt: z.string(),\n\tupdatedAt: z.string()\n})\n\n// Property update schema (partial input)\nexport const propertyUpdateSchema = propertyInputSchema.partial().extend({\n\tstatus: propertyStatusSchema.optional()\n})\n\n// Property query schema (for search/filtering)\nexport const propertyQuerySchema = z.object({\n\tsearch: z.string().optional(),\n\tpropertyType: propertyTypeSchema.optional(),\n\tcity: z.string().optional(),\n\tstate: z.string().optional(),\n\tminRent: nonNegativeNumberSchema.optional(),\n\tmaxRent: nonNegativeNumberSchema.optional(),\n\tbedrooms: positiveNumberSchema.int().optional(),\n\tbathrooms: positiveNumberSchema.optional(),\n\tstatus: propertyStatusSchema.optional(),\n\tsortBy: z.enum(['name', 'createdAt', 'rent', 'city']).optional(),\n\tsortOrder: z.enum(['asc', 'desc']).optional(),\n\tpage: z.coerce.number().int().positive().default(VALIDATION_LIMITS.API_QUERY_DEFAULT_PAGE),\n\tlimit: z.coerce.number().int().positive().max(VALIDATION_LIMITS.API_QUERY_MAX_LIMIT).default(VALIDATION_LIMITS.API_QUERY_DEFAULT_LIMIT)\n})\n\n// Property statistics schema\nexport const propertyStatsSchema = z.object({\n\ttotal: nonNegativeNumberSchema,\n\tactive: nonNegativeNumberSchema,\n\tinactive: nonNegativeNumberSchema,\n\tmaintenance: nonNegativeNumberSchema,\n\ttotalRent: nonNegativeNumberSchema,\n\taverageRent: nonNegativeNumberSchema\n})\n\n// Export types\nexport type PropertyInput = z.infer<typeof propertyInputSchema>\nexport type Property = z.infer<typeof propertySchema>\nexport type PropertyUpdate = z.infer<typeof propertyUpdateSchema>\nexport type PropertyQuery = z.infer<typeof propertyQuerySchema>\nexport type PropertyStats = z.infer<typeof propertyStatsSchema>\nexport type PropertyTypeValidation = z.infer<typeof propertyTypeSchema>\nexport type PropertyStatusValidation = z.infer<typeof propertyStatusSchema>\n\n// Frontend-specific form schema (handles string inputs from HTML forms)\n// Clean schema for React Hook Form zodResolver compatibility\nexport const propertyFormSchema = z.object({\n\tname: requiredString,\n\tdescription: z.string().optional(),\n\tpropertyType: z.enum(\n\t\tConstants.public.Enums.PropertyType as readonly [string, ...string[]]\n\t),\n\taddress: requiredString,\n\tcity: requiredString,\n\tstate: requiredString,\n\tzipCode: requiredString,\n\tbedrooms: z.string().optional(),\n\tbathrooms: z.string().optional(),\n\tsquareFootage: z.string().optional(),\n\trent: z.string().optional(),\n\tdeposit: z.string().optional(),\n\timageUrl: imageUrlSchema, // Validates trusted image sources only\n\tpropertyId: z.string().optional(), // Optional propertyId for form.setFieldValue\n\t// Frontend-specific UI fields\n\thasGarage: z.boolean().optional(),\n\thasPool: z.boolean().optional(),\n\tnumberOfUnits: z.string().optional(),\n\tcreateUnitsNow: z.boolean().optional()\n})\n\n// Transform function for converting form data to API format\n// NOTE: Does NOT include ownerId - backend extracts from authenticated user\nexport const transformPropertyFormData = (\n\tdata: PropertyFormData\n): CreatePropertyRequest => {\n\tconst result: CreatePropertyRequest = {\n\t\tname: data.name,\n\t\taddress: data.address,\n\t\tcity: data.city,\n\t\tstate: data.state,\n\t\tzipCode: data.zipCode,\n\t\tpropertyType:\n\t\t\tdata.propertyType as Database['public']['Enums']['PropertyType']\n\t}\n\n\t// Only include optional fields if they have truthy values (exactOptionalPropertyTypes)\n\tif (data.description) {\n\t\tresult.description = data.description\n\t}\n\n\tif (data.imageUrl) {\n\t\tresult.imageUrl = data.imageUrl\n\t}\n\n\treturn result\n}\n\n// Frontend-specific form schema for updates (handles string inputs from HTML forms)\nexport const propertyUpdateFormSchema = z.object({\n\tname: z.string().optional(),\n\taddress: z.string().optional(),\n\tcity: z.string().optional(),\n\tstate: z.string().optional(),\n\tzipCode: z.string().optional(),\n\tpropertyType: z\n\t\t.enum(Constants.public.Enums.PropertyType as readonly [string, ...string[]])\n\t\t.optional(),\n\tstatus: z\n\t\t.enum(\n\t\t\tConstants.public.Enums.PropertyStatus as readonly [string, ...string[]]\n\t\t)\n\t\t.optional()\n})\n\n// Transform function for converting update form data to API format\nexport const transformPropertyUpdateData = (data: PropertyUpdateFormData) => {\n\tconst result: {\n\t\tname?: string\n\t\taddress?: string\n\t\tcity?: string\n\t\tstate?: string\n\t\tzipCode?: string\n\t\tpropertyType?: Database['public']['Enums']['PropertyType']\n\t\tstatus?: Database['public']['Enums']['PropertyStatus']\n\t} = {}\n\n\tif (data.name !== undefined) result.name = data.name\n\tif (data.address !== undefined) result.address = data.address\n\tif (data.city !== undefined) result.city = data.city\n\tif (data.state !== undefined) result.state = data.state\n\tif (data.zipCode !== undefined) result.zipCode = data.zipCode\n\tif (data.propertyType !== undefined) {\n\t\tresult.propertyType =\n\t\t\tdata.propertyType as Database['public']['Enums']['PropertyType']\n\t}\n\tif (data.status !== undefined) {\n\t\tresult.status = data.status as Database['public']['Enums']['PropertyStatus']\n\t}\n\n\treturn result\n}\n\nexport type PropertyFormData = z.infer<typeof propertyFormSchema>\nexport type PropertyUpdateFormData = z.infer<typeof propertyUpdateFormSchema>\nexport type TransformedPropertyData = ReturnType<\n\ttypeof transformPropertyFormData\n>\nexport type TransformedPropertyUpdateData = ReturnType<\n\ttypeof transformPropertyUpdateData\n>\n\n// Property sold schema (for marking properties as sold with required compliance fields)\nexport const propertyMarkedSoldSchema = z.object({\n\tdateSold: z.string().refine(val => {\n\t\tconst date = new Date(val)\n\t\treturn !isNaN(date.getTime()) && date <= new Date()\n\t}, 'Sale date must be valid and cannot be in the future'),\n\tsalePrice: positiveNumberSchema\n\t\t.max(VALIDATION_LIMITS.SALE_PRICE_MAXIMUM, 'Sale price seems unrealistic')\n\t\t.refine(val => val > 0, 'Sale price must be greater than $0'),\n\tsaleNotes: z\n\t\t.string()\n\t\t.max(VALIDATION_LIMITS.PROPERTY_DESCRIPTION_MAX_LENGTH, `Sale notes cannot exceed ${VALIDATION_LIMITS.PROPERTY_DESCRIPTION_MAX_LENGTH} characters`)\n\t\t.optional()\n\t\t.or(z.literal(''))\n})\n\nexport type PropertyMarkedSold = z.infer<typeof propertyMarkedSoldSchema>\n\n// Backend DTO schemas - match CreatePropertyRequest/UpdatePropertyRequest from backend-domain.ts\nexport const createPropertyRequestSchema = z.object({\n\tname: z.string().trim().min(1, 'Property name is required'),\n\taddress: z.string().trim().min(1, 'Address is required'),\n\tcity: z.string().trim().min(1, 'City is required'),\n\tstate: z\n\t\t.string()\n\t\t.trim()\n\t\t.length(2, 'State must be exactly 2 characters')\n\t\t.regex(/^[A-Z]{2}$/, 'State must be 2 uppercase letters'),\n\tzipCode: z\n\t\t.string()\n\t\t.trim()\n\t\t.regex(\n\t\t\t/^\\d{5}(-\\d{4})?$/,\n\t\t\t'Please enter a valid ZIP code (12345 or 12345-6789)'\n\t\t),\n\t// NOTE: ownerId is NOT in request - backend derives from authenticated user for security\n\tunitCount: z.number().int().positive().optional(),\n\tdescription: z.string().optional(),\n\tpropertyType: z.enum(\n\t\tConstants.public.Enums.PropertyType as readonly [string, ...string[]]\n\t),\n\tamenities: z.array(z.string()).optional(),\n\timageUrl: imageUrlSchema\n\t\t.transform(val => (val === '' || val === null ? undefined : val))\n\t\t.optional()\n})\n\nexport const updatePropertyRequestSchema = z.object({\n\tname: z.string().trim().min(1, 'Property name is required').optional(),\n\taddress: z.string().trim().min(1, 'Address is required').optional(),\n\tcity: z.string().trim().min(1, 'City is required').optional(),\n\tstate: z\n\t\t.string()\n\t\t.trim()\n\t\t.length(2, 'State must be exactly 2 characters')\n\t\t.regex(/^[A-Z]{2}$/, 'State must be 2 uppercase letters')\n\t\t.optional(),\n\tzipCode: z\n\t\t.string()\n\t\t.trim()\n\t\t.regex(\n\t\t\t/^\\d{5}(-\\d{4})?$/,\n\t\t\t'Please enter a valid ZIP code (12345 or 12345-6789)'\n\t\t)\n\t\t.optional(),\n\tunitCount: z.number().int().positive().optional(),\n\tdescription: z.string().optional(),\n\tpropertyType: propertyTypeSchema.optional(),\n\tamenities: z.array(z.string()).optional(),\n\timageUrl: imageUrlSchema\n\t\t.transform(val => (val === '' || val === null ? undefined : val))\n\t\t.optional(),\n\tversion: z.number().optional()\n})\n\n// Property image upload schema\nexport const propertyImageUploadSchema = z.object({\n\tisPrimary: z\n\t\t.union([\n\t\t\tz.boolean(),\n\t\t\tz\n\t\t\t\t.string()\n\t\t\t\t.toLowerCase()\n\t\t\t\t.transform(val => val.trim())\n\t\t\t\t.refine(val => ['true', 'false', '1', '0', 'yes', 'no'].includes(val), {\n\t\t\t\t\tmessage:\n\t\t\t\t\t\t'isPrimary must be one of: true, false, 1, 0, yes, no (case-insensitive)'\n\t\t\t\t})\n\t\t\t\t.transform(val => ['true', '1', 'yes'].includes(val))\n\t\t])\n\t\t.default(false),\n\tcaption: z\n\t\t.string()\n\t\t.trim()\n\t\t.max(255, 'Caption cannot exceed 255 characters')\n\t\t.optional()\n\t\t.transform(val => (val && val.length > 0 ? val : undefined))\n})\n\nexport type PropertyImageUpload = z.infer<typeof propertyImageUploadSchema>\n"]}