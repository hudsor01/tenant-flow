{"version":3,"file":"lease-template.js","sourceRoot":"","sources":["lease-template.ts"],"names":[],"mappings":"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","sourcesContent":["import type { LeaseFormData, USState } from '../types/lease-generator.types'\n\nexport interface LeaseTemplateClause {\n\tid: string\n\ttitle: string\n\tdescription: string\n\ttooltip: string\n\tdefaultSelected: boolean\n\tbody: string\n\tstateLimitation?: USState[]\n\trequiresOption?: 'includeStateDisclosures' | 'includeFederalDisclosures'\n}\n\nexport interface LeaseTemplateSection {\n\tid: string\n\ttitle: string\n\tdescription: string\n\tclauses: LeaseTemplateClause[]\n}\n\nexport interface LeaseTemplateStateRule {\n\tstate: USState\n\tstateName: string\n\tnotices: string[]\n\trecommendedClauses?: string[]\n}\n\nexport interface LeaseTemplateSchema {\n\tversion: string\n\tsections: LeaseTemplateSection[]\n\tstateRules: Record<USState, LeaseTemplateStateRule>\n\tfederalNotices: string[]\n\tglossary: Record<string, string>\n}\n\nexport interface CustomClause {\n\tid: string\n\ttitle: string\n\tbody: string\n}\n\nexport interface LeaseTemplateSelections {\n\tstate: USState\n\tselectedClauses: string[]\n\tincludeStateDisclosures: boolean\n\tincludeFederalDisclosures: boolean\n\tcustomClauses?: CustomClause[]\n}\n\nexport interface LeaseTemplateContext {\n\townerName: string\n\townerAddress: string\n\ttenantNames: string\n\tpropertyAddress: string\n\tpropertyState: USState\n\trentAmountCents: number\n\trentAmountFormatted: string\n\trentDueDay: number\n\trentDueDayOrdinal: string\n\tsecurityDepositCents: number\n\tsecurityDepositFormatted: string\n\tleaseStartDateISO: string\n\tleaseEndDateISO?: string\n\tleaseStartDateFormatted: string\n\tleaseEndDateFormatted?: string\n\tlateFeeAmountCents?: number\n\tlateFeeAmountFormatted?: string\n\tgracePeriodDays?: number\n\tformattedDateGenerated: string\n}\n\nexport interface LeaseTemplatePreviewRequest {\n\tselections: LeaseTemplateSelections\n\tcontext: LeaseTemplateContext\n}\n\n/**\n * Escape HTML special characters to prevent injection attacks\n */\nfunction escapeHtml(unsafe: string): string {\n\treturn unsafe\n\t\t.replace(/&/g, '&amp;')\n\t\t.replace(/</g, '&lt;')\n\t\t.replace(/>/g, '&gt;')\n\t\t.replace(/\"/g, '&quot;')\n\t\t.replace(/'/g, '&#039;')\n}\n\nexport const stateNames: Record<USState, string> = {\n\tAL: 'Alabama',\n\tAK: 'Alaska',\n\tAZ: 'Arizona',\n\tAR: 'Arkansas',\n\tCA: 'California',\n\tCO: 'Colorado',\n\tCT: 'Connecticut',\n\tDE: 'Delaware',\n\tFL: 'Florida',\n\tGA: 'Georgia',\n\tHI: 'Hawaii',\n\tID: 'Idaho',\n\tIL: 'Illinois',\n\tIN: 'Indiana',\n\tIA: 'Iowa',\n\tKS: 'Kansas',\n\tKY: 'Kentucky',\n\tLA: 'Louisiana',\n\tME: 'Maine',\n\tMD: 'Maryland',\n\tMA: 'Massachusetts',\n\tMI: 'Michigan',\n\tMN: 'Minnesota',\n\tMS: 'Mississippi',\n\tMO: 'Missouri',\n\tMT: 'Montana',\n\tNE: 'Nebraska',\n\tNV: 'Nevada',\n\tNH: 'New Hampshire',\n\tNJ: 'New Jersey',\n\tNM: 'New Mexico',\n\tNY: 'New York',\n\tNC: 'North Carolina',\n\tND: 'North Dakota',\n\tOH: 'Ohio',\n\tOK: 'Oklahoma',\n\tOR: 'Oregon',\n\tPA: 'Pennsylvania',\n\tRI: 'Rhode Island',\n\tSC: 'South Carolina',\n\tSD: 'South Dakota',\n\tTN: 'Tennessee',\n\tTX: 'Texas',\n\tUT: 'Utah',\n\tVT: 'Vermont',\n\tVA: 'Virginia',\n\tWA: 'Washington',\n\tWV: 'West Virginia',\n\tWI: 'Wisconsin',\n\tWY: 'Wyoming',\n\tDC: 'District of Columbia'\n}\n\nconst currencyFormatter = new Intl.NumberFormat('en-US', {\n\tstyle: 'currency',\n\tcurrency: 'USD'\n})\n\nfunction formatCurrency(cents: number) {\n\treturn currencyFormatter.format(cents / 100)\n}\n\nfunction formatDate(iso: string | undefined) {\n\tif (!iso) return ''\n\tconst date = new Date(iso)\n\treturn date.toLocaleDateString('en-US', {\n\t\tyear: 'numeric',\n\t\tmonth: 'long',\n\t\tday: 'numeric'\n\t})\n}\n\nfunction formatOrdinal(input: number) {\n\tconst suffixes = ['th', 'st', 'nd', 'rd']\n\tconst v = input % 100\n\tconst suffix = suffixes[(v - 20) % 10] || suffixes[v] || suffixes[0]\n\treturn `${input}${suffix}`\n}\n\nconst DEFAULT_CONTEXT: LeaseTemplateContext = {\n\townerName: 'Owner Name',\n\townerAddress: '123 Main Street, Suite 200, Austin, TX 78701',\n\ttenantNames: 'Tenant One; Tenant Two',\n\tpropertyAddress: '456 Elm Street, Austin, TX 78701',\n\tpropertyState: 'TX',\n\trentAmountCents: 180000,\n\trentAmountFormatted: formatCurrency(180000),\n\trentDueDay: 1,\n\trentDueDayOrdinal: formatOrdinal(1),\n\tsecurityDepositCents: 180000,\n\tsecurityDepositFormatted: formatCurrency(180000),\n\tleaseStartDateISO: new Date().toISOString(),\n\tleaseStartDateFormatted: formatDate(new Date().toISOString()),\n\tlateFeeAmountCents: 5000,\n\tlateFeeAmountFormatted: formatCurrency(5000),\n\tgracePeriodDays: 5,\n\tformattedDateGenerated: formatDate(new Date().toISOString())\n}\n\nexport const leaseTemplateSchema: LeaseTemplateSchema = {\n\tversion: '2.0',\n\tsections: [\n\t\t{\n\t\t\tid: 'parties',\n\t\t\ttitle: 'Parties & Premises',\n\t\t\tdescription:\n\t\t\t\t'Identifies the parties entering into the agreement and the property covered by the lease.',\n\t\t\tclauses: [\n\t\t\t\t{\n\t\t\t\t\tid: 'parties-introduction',\n\t\t\t\t\ttitle: 'Lease Introduction',\n\t\t\t\t\tdescription:\n\t\t\t\t\t\t'Introduces the Owner and Tenant along with the effective date of the agreement.',\n\t\t\t\t\ttooltip:\n\t\t\t\t\t\t'This clause formally states who is entering into the lease and establishes the official name of the agreement.',\n\t\t\t\t\tdefaultSelected: true,\n\t\t\t\t\tbody: `<p>This Residential Lease Agreement (\"Agreement\") is entered into on {{formattedDateGenerated}} between <strong>{{ownerName}}</strong> (\"Owner\") and <strong>{{tenantNames}}</strong> (\"Tenant\").</p>`\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: 'property-description',\n\t\t\t\t\ttitle: 'Premises Description',\n\t\t\t\t\tdescription:\n\t\t\t\t\t\t'Describes the physical property and what is included in the lease.',\n\t\t\t\t\ttooltip:\n\t\t\t\t\t\t'Defines the exact property being rented to avoid disputes over what is included.',\n\t\t\t\t\tdefaultSelected: true,\n\t\t\t\t\tbody: `<p>The Owner leases to the Tenant the residential premises located at <strong>{{propertyAddress}}</strong> (the \"Premises\") together with all improvements, fixtures, and appurtenances.</p>`\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: 'occupancy-limit',\n\t\t\t\t\ttitle: 'Occupancy Limit',\n\t\t\t\t\tdescription:\n\t\t\t\t\t\t'Specifies who may reside at the premises and limits subletting.',\n\t\t\t\t\ttooltip:\n\t\t\t\t\t\t'Helps prevent unauthorized occupants and protects against overcrowding violations.',\n\t\t\t\t\tdefaultSelected: true,\n\t\t\t\t\tbody: `<p>Occupancy of the Premises is limited to the Tenant(s) named above and their immediate family. No other persons may reside at the Premises without the prior written consent of the Owner.</p>`\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\tid: 'financial',\n\t\t\ttitle: 'Financial Terms',\n\t\t\tdescription:\n\t\t\t\t'Sets out the rent, deposits, fees, and payment schedules required under the lease.',\n\t\t\tclauses: [\n\t\t\t\t{\n\t\t\t\t\tid: 'rent-payment',\n\t\t\t\t\ttitle: 'Rent Payment Schedule',\n\t\t\t\t\tdescription: 'Defines rent amount, due date, and payment method.',\n\t\t\t\t\ttooltip:\n\t\t\t\t\t\t'Provides the legally enforceable rent obligations including grace periods and accepted payment methods.',\n\t\t\t\t\tdefaultSelected: true,\n\t\t\t\t\tbody: `<p>Tenant agrees to pay monthly rent of <strong>{{rentAmountFormatted}}</strong>, due on the <strong>{{rentDueDayOrdinal}}</strong> day of each month by 5:00 PM. Rent shall be paid via electronic transfer or other method approved by the Owner.</p>`\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: 'late-fee',\n\t\t\t\t\ttitle: 'Late Fees & Grace Period',\n\t\t\t\t\tdescription:\n\t\t\t\t\t\t'Explains when late fees apply and grace period duration.',\n\t\t\t\t\ttooltip:\n\t\t\t\t\t\t'Late fees must comply with state law; this clause sets enforceable rules to encourage timely payments.',\n\t\t\t\t\tdefaultSelected: true,\n\t\t\t\t\tbody: `<p>If rent is not received within {{gracePeriodDays}} days after the due date, a late fee of <strong>{{lateFeeAmountFormatted}}</strong> may be assessed. Continued non-payment may result in additional remedies permitted by law.</p>`\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: 'security-deposit',\n\t\t\t\t\ttitle: 'Security Deposit',\n\t\t\t\t\tdescription: 'Details deposit amount and return conditions.',\n\t\t\t\t\ttooltip:\n\t\t\t\t\t\t'Security deposit rules are heavily regulated; this clause reflects the base requirement for most states.',\n\t\t\t\t\tdefaultSelected: true,\n\t\t\t\t\tbody: `<p>Tenant has paid a security deposit of <strong>{{securityDepositFormatted}}</strong> upon execution of this Agreement. The deposit shall be held to secure Tenant’s performance and will be returned less lawful deductions within the time period prescribed by {{stateName}} law.</p>`\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\tid: 'use-and-care',\n\t\t\ttitle: 'Use, Care & Maintenance',\n\t\t\tdescription:\n\t\t\t\t'Allocates maintenance responsibilities and establishes rules of conduct.',\n\t\t\tclauses: [\n\t\t\t\t{\n\t\t\t\t\tid: 'maintenance-responsibilities',\n\t\t\t\t\ttitle: 'Maintenance Responsibilities',\n\t\t\t\t\tdescription:\n\t\t\t\t\t\t'Outlines the responsibilities for upkeep and repairs for Owner and Tenant.',\n\t\t\t\t\ttooltip:\n\t\t\t\t\t\t'Clarifies who must handle routine maintenance and prevents disputes over repairs.',\n\t\t\t\t\tdefaultSelected: true,\n\t\t\t\t\tbody: `<p>Tenant shall maintain the Premises in a clean and sanitary condition and promptly notify Owner of conditions requiring repair. Owner will maintain major structural, plumbing, heating, and electrical systems in good working order.</p>`\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: 'utilities',\n\t\t\t\t\ttitle: 'Utilities & Services',\n\t\t\t\t\tdescription:\n\t\t\t\t\t\t'Specifies who pays for utilities and services related to the property.',\n\t\t\t\t\ttooltip:\n\t\t\t\t\t\t'Important to clarify utility obligations up front to avoid billing disputes or service interruptions.',\n\t\t\t\t\tdefaultSelected: true,\n\t\t\t\t\tbody: `<p>The Tenant is responsible for all utilities and services supplied to the Premises, except where otherwise required by law. Owner shall ensure utility services are active on the commencement date.</p>`\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: 'owner-entry',\n\t\t\t\t\ttitle: 'Owner Entry Rights',\n\t\t\t\t\tdescription:\n\t\t\t\t\t\t'Provides notice requirements and acceptable reasons for Owner entry.',\n\t\t\t\t\ttooltip:\n\t\t\t\t\t\t'Most states mandate advance notice for non-emergency entry; this clause mirrors typical statutory requirements.',\n\t\t\t\t\tdefaultSelected: true,\n\t\t\t\t\tbody: `<p>Owner may enter the Premises upon providing reasonable notice (at least 24 hours except in emergencies) for repairs, inspections, or to show the Premises to prospective tenants or buyers.</p>`\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\tid: 'policy',\n\t\t\ttitle: 'Policies & Rules',\n\t\t\tdescription: 'Covers pets, smoking, guests, and other house rules.',\n\t\t\tclauses: [\n\t\t\t\t{\n\t\t\t\t\tid: 'pet-policy',\n\t\t\t\t\ttitle: 'Pet Policy',\n\t\t\t\t\tdescription:\n\t\t\t\t\t\t'States whether pets are permitted and applicable terms.',\n\t\t\t\t\ttooltip:\n\t\t\t\t\t\t'Pet policies should be explicit to avoid unapproved animals and detail deposits or fees.',\n\t\t\t\t\tdefaultSelected: true,\n\t\t\t\t\tbody: `<p>Pets are permitted only with prior written consent of the Owner. Approved pets may require an additional deposit or monthly fee as allowed by law. Service and assistance animals are accommodated in accordance with federal and state regulations.</p>`\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: 'smoking-policy',\n\t\t\t\t\ttitle: 'Smoking Policy',\n\t\t\t\t\tdescription:\n\t\t\t\t\t\t'Sets restrictions on smoking within the property and common areas.',\n\t\t\t\t\ttooltip:\n\t\t\t\t\t\t'Clarifies smoking rules and provides grounds for addressing violations.',\n\t\t\t\t\tdefaultSelected: false,\n\t\t\t\t\tbody: `<p>Smoking, including vaping and electronic cigarettes, is not permitted inside the Premises. Designated outdoor areas may be used provided smoke does not infiltrate the building or disturb neighbors.</p>`\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: 'guest-policy',\n\t\t\t\t\ttitle: 'Guest Policy',\n\t\t\t\t\tdescription:\n\t\t\t\t\t\t'Sets limits on guest stays to prevent unauthorized long-term occupants.',\n\t\t\t\t\ttooltip:\n\t\t\t\t\t\t'Helps differentiate between guests and unapproved occupants, protecting against subletting without consent.',\n\t\t\t\t\tdefaultSelected: false,\n\t\t\t\t\tbody: `<p>Guests staying more than 14 cumulative days in a calendar year must receive written approval from Owner. Tenant remains fully responsible for guests’ conduct and compliance with this Agreement.</p>`\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\tid: 'compliance',\n\t\t\ttitle: 'Legal Compliance',\n\t\t\tdescription:\n\t\t\t\t'Addresses legal compliance, default remedies, and disclosure obligations.',\n\t\t\tclauses: [\n\t\t\t\t{\n\t\t\t\t\tid: 'default-remedies',\n\t\t\t\t\ttitle: 'Default & Remedies',\n\t\t\t\t\tdescription:\n\t\t\t\t\t\t'Explains what happens if tenant violates the lease or fails to pay rent.',\n\t\t\t\t\ttooltip:\n\t\t\t\t\t\t\"Outlines the steps Owner may take upon default and protects Owner's right to enforce the lease.\",\n\t\t\t\t\tdefaultSelected: true,\n\t\t\t\t\tbody: `<p>Failure to pay rent or abide by this Agreement constitutes a default. Owner may pursue all remedies permitted by {{stateName}} law, including termination and eviction, after providing any required notices.</p>`\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: 'lead-paint-disclosure',\n\t\t\t\t\ttitle: 'Lead-Based Paint Disclosure',\n\t\t\t\t\tdescription:\n\t\t\t\t\t\t'Includes federally required information for properties built before 1978.',\n\t\t\t\t\ttooltip:\n\t\t\t\t\t\t'Federal law mandates disclosure for pre-1978 housing; include when applicable.',\n\t\t\t\t\tdefaultSelected: false,\n\t\t\t\t\trequiresOption: 'includeFederalDisclosures',\n\t\t\t\t\tbody: `<p><strong>Lead Warning Statement:</strong> Housing built before 1978 may contain lead-based paint. Exposure to lead dust or chips can cause health problems, especially in children and pregnant women. Tenant acknowledges receipt of the EPA pamphlet “Protect Your Family From Lead in Your Home.”</p>`\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: 'state-specific-disclosures',\n\t\t\t\t\ttitle: 'State-Specific Disclosures',\n\t\t\t\t\tdescription:\n\t\t\t\t\t\t'Includes notices required under the selected state’s law.',\n\t\t\t\t\ttooltip:\n\t\t\t\t\t\t'Many states require specific language covering mold, bedbugs, flooding, and other hazards.',\n\t\t\t\t\tdefaultSelected: true,\n\t\t\t\t\trequiresOption: 'includeStateDisclosures',\n\t\t\t\t\tbody: `<p><strong>State Disclosures:</strong> The Tenant acknowledges the additional disclosures and acknowledgements required by {{stateName}} law, set forth in the attached addendum.</p>`\n\t\t\t\t}\n\t\t\t]\n\t\t}\n\t],\n\tstateRules: {\n\t\tCA: {\n\t\t\tstate: 'CA',\n\t\t\tstateName: stateNames.CA,\n\t\t\tnotices: [\n\t\t\t\t'California Civil Code §1950.5 limits residential security deposits to two months’ rent for unfurnished units.',\n\t\t\t\t'California requires a written disclosure if the property is within one mile of a former military base that handled munitions.',\n\t\t\t\t'Tenants in California must receive notice before pesticide application inside the unit.'\n\t\t\t],\n\t\t\trecommendedClauses: ['state-specific-disclosures', 'late-fee']\n\t\t},\n\t\tNY: {\n\t\t\tstate: 'NY',\n\t\t\tstateName: stateNames.NY,\n\t\t\tnotices: [\n\t\t\t\t'New York General Obligations Law limits late fees to $50 or 5% of monthly rent, whichever is less.',\n\t\t\t\t'Security deposits must be returned within 14 days of lease termination with an itemized receipt.',\n\t\t\t\t'Rent-stabilized units require additional rider disclosures under DHCR regulations.'\n\t\t\t],\n\t\t\trecommendedClauses: ['state-specific-disclosures']\n\t\t},\n\t\tIL: {\n\t\t\tstate: 'IL',\n\t\t\tstateName: stateNames.IL,\n\t\t\tnotices: [\n\t\t\t\t'Chicago Residential Property Owner and Tenant Ordinance imposes additional duties if the property is located within Chicago city limits.',\n\t\t\t\t'Security deposits must be held in a federally insured account in Illinois municipalities over 5,000 residents.',\n\t\t\t\t'Mold disclosure and pamphlet delivery are recommended for older multifamily properties.'\n\t\t\t],\n\t\t\trecommendedClauses: ['state-specific-disclosures']\n\t\t},\n\t\tTX: {\n\t\t\tstate: 'TX',\n\t\t\tstateName: stateNames.TX,\n\t\t\tnotices: [\n\t\t\t\t'Texas Property Code §92.109 requires property owners to provide written notice of security deposit deductions within 30 days of move-out.',\n\t\t\t\t'Property owners must provide smoke detector and carbon monoxide detector disclosures at lease signing (Texas Property Code §92.151, §92.157).',\n\t\t\t\t'Texas Property Code §92.052 requires property owners to provide contact information for the property owner or manager.',\n\t\t\t\t'Window and door lock requirements must be disclosed if not compliant with Texas Property Code §92.151-§92.154.'\n\t\t\t],\n\t\t\trecommendedClauses: [\n\t\t\t\t'state-specific-disclosures',\n\t\t\t\t'late-fee',\n\t\t\t\t'owner-entry'\n\t\t\t]\n\t\t}\n\t} as Record<USState, LeaseTemplateStateRule>,\n\tfederalNotices: [\n\t\t'The Fair Housing Act prohibits discrimination on the basis of race, color, religion, sex, familial status, national origin, or disability.',\n\t\t'Tenants are entitled to reasonable accommodations for disabilities under the Americans with Disabilities Act (ADA) and Section 504 of the Rehabilitation Act.'\n\t],\n\tglossary: {\n\t\t'Security Deposit':\n\t\t\t'Money held by the Owner to cover unpaid rent or damage beyond normal wear and tear.',\n\t\t'Grace Period':\n\t\t\t'The number of days after the due date during which rent can be paid without triggering a late fee.',\n\t\tPremises:\n\t\t\t'The rental property, including fixtures and any areas granted for the tenant’s exclusive use.',\n\t\tDefault:\n\t\t\t'A violation of a lease obligation that may give rise to eviction or other remedies.',\n\t\t'Notice to Enter':\n\t\t\t'Advance notice required before the Owner may lawfully enter the rental unit.'\n\t}\n}\n\nfunction resolveToken(context: LeaseTemplateContext, token: string): string {\n\tconst path = token.split('.')\n\tlet current: unknown = context\n\tfor (const segment of path) {\n\t\tif (\n\t\t\tcurrent &&\n\t\t\ttypeof current === 'object' &&\n\t\t\tsegment in (current as Record<string, unknown>)\n\t\t) {\n\t\t\tcurrent = (current as Record<string, unknown>)[segment]\n\t\t} else {\n\t\t\treturn ''\n\t\t}\n\t}\n\treturn current === null || current === undefined ? '' : String(current)\n}\n\nfunction interpolate(template: string, context: LeaseTemplateContext) {\n\treturn template.replace(/\\{\\{([^}]+)\\}\\}/g, (_, expression: string) => {\n\t\tconst token = expression.trim()\n\t\tif (token === 'stateName') {\n\t\t\treturn stateNames[context.propertyState] || context.propertyState\n\t\t}\n\t\treturn resolveToken(context, token)\n\t})\n}\n\nfunction buildClauseHtml(\n\tclause: LeaseTemplateClause,\n\tcontext: LeaseTemplateContext\n) {\n\treturn `<article data-clause=\"${escapeHtml(clause.id)}\" class=\"lease-clause\"><h3>${escapeHtml(clause.title)}</h3>${interpolate(clause.body, context)}</article>`\n}\n\nfunction renderCustomClauses(customClauses: CustomClause[] | undefined) {\n\tif (!customClauses?.length) return ''\n\treturn customClauses\n\t\t.map(\n\t\t\tclause => `<article data-clause=\"${escapeHtml(clause.id)}\" class=\"lease-clause\">\n      <h3>${escapeHtml(clause.title)}</h3>\n      <p>${escapeHtml(clause.body)}</p>`\n\t\t)\n\t\t.join('')\n}\n\nfunction renderSection(\n\tsection: LeaseTemplateSection,\n\tselections: LeaseTemplateSelections,\n\tcontext: LeaseTemplateContext\n) {\n\tconst included = section.clauses.filter(clause => {\n\t\tif (\n\t\t\tclause.stateLimitation &&\n\t\t\t!clause.stateLimitation.includes(selections.state)\n\t\t) {\n\t\t\treturn false\n\t\t}\n\t\tif (\n\t\t\tclause.requiresOption === 'includeStateDisclosures' &&\n\t\t\t!selections.includeStateDisclosures\n\t\t) {\n\t\t\treturn false\n\t\t}\n\t\tif (\n\t\t\tclause.requiresOption === 'includeFederalDisclosures' &&\n\t\t\t!selections.includeFederalDisclosures\n\t\t) {\n\t\t\treturn false\n\t\t}\n\t\treturn selections.selectedClauses.includes(clause.id)\n\t})\n\n\tif (!included.length) return ''\n\n\tconst clausesHtml = included\n\t\t.map(clause => buildClauseHtml(clause, context))\n\t\t.join('')\n\n\treturn `<section id=\"${section.id}\" class=\"lease-section\">\n\t<header class=\"lease-section-header\">\n\t\t<h2>${section.title}</h2>\n\t\t<p>${section.description}</p>\n\t</header>\n\t${clausesHtml}\n</section>`\n}\n\nfunction renderStateNotices(\n\tselections: LeaseTemplateSelections,\n\tschema: LeaseTemplateSchema\n) {\n\tif (!selections.includeStateDisclosures) return ''\n\tconst rules = schema.stateRules[selections.state]\n\tif (!rules || !rules.notices.length) return ''\n\tconst noticeItems = rules.notices.map(notice => `<li>${notice}</li>`).join('')\n\treturn `<section class=\"lease-section\">\n\t<header class=\"lease-section-header\">\n\t\t<h2>State Notices</h2>\n\t\t<p>Required disclosures and recommendations for ${rules.stateName}</p>\n\t</header>\n\t<ul class=\"legal-list\">${noticeItems}</ul>\n</section>`\n}\n\nfunction renderFederalNotices(schema: LeaseTemplateSchema) {\n\tif (!schema.federalNotices.length) return ''\n\tconst list = schema.federalNotices\n\t\t.map(notice => `<li>${notice}</li>`)\n\t\t.join('')\n\treturn `<section class=\"lease-section\">\n\t<header class=\"lease-section-header\">\n\t\t<h2>Federal Notices</h2>\n\t\t<p>Important federal disclosures that apply to residential leases</p>\n\t</header>\n\t<ul class=\"legal-list\">${list}</ul>\n</section>`\n}\n\nexport function renderLeaseHtmlBody(\n\tschema: LeaseTemplateSchema,\n\tselections: LeaseTemplateSelections,\n\tcontext: LeaseTemplateContext\n) {\n\tconst sectionHtml = schema.sections\n\t\t.map(section => renderSection(section, selections, context))\n\t\t.join('')\n\n\tconst customHtml = renderCustomClauses(selections.customClauses)\n\tconst stateHtml = renderStateNotices(selections, schema)\n\tconst federalHtml = selections.includeFederalDisclosures\n\t\t? renderFederalNotices(schema)\n\t\t: ''\n\n\treturn `<div class=\"lease-document\">\n\t<header class=\"lease-header\">\n\t\t<h1>Residential Lease Agreement</h1>\n\t\t<p>\n\t\tThis Agreement is made between <strong>${escapeHtml(context.ownerName)}</strong> (\"owner\") and <strong>${escapeHtml(context.tenantNames)}</strong> (\"Tenant\") concerning the premises at <strong>${escapeHtml(context.propertyAddress)}</strong>.\n\t\t</p>\n\t</header>\n\t${sectionHtml}\n\t${customHtml}\n\t${stateHtml}\n\t${federalHtml}\n</div>`\n}\n\nexport function renderLeaseHtmlDocument(\n\tschema: LeaseTemplateSchema,\n\tselections: LeaseTemplateSelections,\n\tcontext: LeaseTemplateContext\n) {\n\tconst body = renderLeaseHtmlBody(schema, selections, context)\n\treturn `<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n\t<meta charset=\"utf-8\" />\n\t<title>Lease Agreement</title>\n\t<style>\n\t\tbody {\n\t\t\tfont-family: 'Inter', 'Segoe UI', Arial, sans-serif;\n\t\t\tcolor: #1e293b;\n\t\t\tline-height: 1.6;\n\t\t\tmargin: 0;\n\t\t\tpadding: 32px;\n\t\t\tbackground: #f8fafc;\n\t\t}\n\t\t.lease-document {\n\t\t\tbackground: white;\n\t\t\tborder-radius: 12px;\n\t\t\tpadding: 40px;\n\t\t\tbox-shadow: 0 20px 45px rgba(15, 23, 42, 0.08);\n\t\t\tmax-width: 900px;\n\t\t\tmargin: 0 auto;\n\t\t}\n\t\t.lease-header {\n\t\t\ttext-align: center;\n\t\t\tmargin-bottom: 40px;\n\t\t}\n\t\t.lease-header h1 {\n\t\t\tfont-size: 28px;\n\t\t\tmargin-bottom: 8px;\n\t\t\tcolor: #0f172a;\n\t\t}\n\t\t.lease-section {\n\t\t\tmargin-bottom: 36px;\n\t\t\tpadding-bottom: 24px;\n\t\t\tborder-bottom: 1px solid rgba(15, 23, 42, 0.08);\n\t\t}\n\t\t.lease-section:last-of-type {\n\t\t\tborder-bottom: none;\n\t\t}\n\t\t.lease-section-header h2 {\n\t\t\tfont-size: 20px;\n\t\t\tmargin-bottom: 4px;\n\t\t\tcolor: #0f172a;\n\t\t}\n\t\t.lease-section-header p {\n\t\t\tmargin: 0 0 16px;\n\t\t\tcolor: #475569;\n\t\t\tfont-size: 15px;\n\t\t}\n\t\t.lease-clause {\n\t\t\tmargin-bottom: 18px;\n\t\t}\n\t\t.lease-clause h3 {\n\t\t\tmargin-bottom: 6px;\n\t\t\tfont-size: 17px;\n\t\t\tcolor: #0f172a;\n\t\t}\n\t\t.lease-clause p {\n\t\t\tmargin: 0;\n\t\t\tfont-size: 15px;\n\t\t}\n\t\t.legal-list {\n\t\t\tpadding-left: 18px;\n\t\t}\n\t\t.legal-list li {\n\t\t\tmargin-bottom: 8px;\n\t\t\tfont-size: 15px;\n\t\t}\n\t</style>\n</head>\n<body>\n\t${body}\n</body>\n</html>`\n}\n\nexport function getDefaultSelections(\n\tschema: LeaseTemplateSchema,\n\tstate: USState\n): LeaseTemplateSelections {\n\tconst selectedClauses = schema.sections.flatMap(section =>\n\t\tsection.clauses\n\t\t\t.filter(clause => clause.defaultSelected)\n\t\t\t.map(clause => clause.id)\n\t)\n\n\treturn {\n\t\tstate,\n\t\tselectedClauses,\n\t\tincludeStateDisclosures: true,\n\t\tincludeFederalDisclosures: true,\n\t\tcustomClauses: []\n\t}\n}\n\nexport function createDefaultContext(\n\toverrides?: Partial<LeaseTemplateContext>\n) {\n\treturn {\n\t\t...DEFAULT_CONTEXT,\n\t\t...overrides,\n\t\trentAmountFormatted: formatCurrency(\n\t\t\toverrides?.rentAmountCents ?? DEFAULT_CONTEXT.rentAmountCents\n\t\t),\n\t\tsecurityDepositFormatted: formatCurrency(\n\t\t\toverrides?.securityDepositCents ?? DEFAULT_CONTEXT.securityDepositCents\n\t\t),\n\t\trentDueDayOrdinal: formatOrdinal(\n\t\t\toverrides?.rentDueDay ?? DEFAULT_CONTEXT.rentDueDay\n\t\t),\n\t\tleaseStartDateFormatted: formatDate(\n\t\t\toverrides?.leaseStartDateISO ?? DEFAULT_CONTEXT.leaseStartDateISO\n\t\t),\n\t\t...(overrides?.leaseEndDateISO\n\t\t\t? { leaseEndDateFormatted: formatDate(overrides.leaseEndDateISO) }\n\t\t\t: {}),\n\t\tlateFeeAmountFormatted: formatCurrency(\n\t\t\toverrides?.lateFeeAmountCents ?? DEFAULT_CONTEXT.lateFeeAmountCents ?? 0\n\t\t)\n\t}\n}\n\nexport function createContextFromLeaseData(\n\tleaseData: LeaseFormData\n): LeaseTemplateContext {\n\tconst tenantNames = leaseData.tenants.map(tenant => tenant.name).join('; ')\n\tconst ownerAddress = `${leaseData.owner.address.street}, ${leaseData.owner.address.city}, ${leaseData.owner.address.state} ${leaseData.owner.address.zipCode}`\n\tconst propertyAddress = `${leaseData.property.address.street}${\n\t\tleaseData.property.address.unit\n\t\t\t? `, ${leaseData.property.address.unit}`\n\t\t\t: ''\n\t}, ${leaseData.property.address.city}, ${leaseData.property.address.state} ${leaseData.property.address.zipCode}`\n\n\tconst overrides: Partial<LeaseTemplateContext> = {\n\t\townerName: leaseData.owner.name,\n\t\townerAddress,\n\t\ttenantNames,\n\t\tpropertyAddress,\n\t\tpropertyState: leaseData.property.address.state,\n\t\trentAmountCents: leaseData.leaseTerms.rentAmount,\n\t\tsecurityDepositCents: leaseData.leaseTerms.securityDeposit.amount,\n\t\trentDueDay: leaseData.leaseTerms.dueDate,\n\t\tleaseStartDateISO: leaseData.leaseTerms.startDate,\n\t\tformattedDateGenerated: formatDate(new Date().toISOString())\n\t}\n\n\tif (leaseData.leaseTerms.endDate) {\n\t\toverrides.leaseEndDateISO = leaseData.leaseTerms.endDate\n\t}\n\tif (leaseData.leaseTerms.lateFee?.amount) {\n\t\toverrides.lateFeeAmountCents = leaseData.leaseTerms.lateFee.amount\n\t}\n\tif (leaseData.leaseTerms.lateFee?.gracePeriod) {\n\t\toverrides.gracePeriodDays = leaseData.leaseTerms.lateFee.gracePeriod\n\t}\n\n\treturn createDefaultContext(overrides)\n}\n"]}